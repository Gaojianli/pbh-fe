import{z as y,a2 as V,d as v,y as C,c as h,A as U,C as k,l as I,D as z,E as a,Q as f,f as e,H as g,a5 as E,J as F,K as b,a6 as L,R,r as q,n as A,F as D,I as H,a7 as J,u as o,v as O,T as $,L as j}from"./index-BGGIvtcR.js";import{O as K,b as M}from"./index-EgcfBpA-.js";import{T as Q}from"./index-C97GafBX.js";function W(p){const{endpoint:t}=y(),l=new URL(V(t,"api/maxbans"),location.href);return l.searchParams.set("num",String(p.num)),fetch(l).then(s=>s.json())}const G={class:"search-box"},X=v({__name:"top50Table",props:{topNumber:{type:Number,required:!0}},setup(p){const t=C(),l=y(),s=[{title:"IP地址",dataIndex:"address",filterable:{filter:(u,r)=>r.address.includes(u),slotName:"name-filter",icon:()=>E(L)}},{title:"历史封禁次数",dataIndex:"count"}],_=p,c=h(()=>_.topNumber),{data:d,loading:i,refresh:n}=U(()=>W({num:c.value}),{pollingInterval:h(()=>t.pollingInterval),onSuccess:t.renewLastUpdate});return k([c,()=>l.endpoint],()=>{n()}),(u,r)=>{const m=F,T=b,S=Q;return I(),z(S,{stripe:!0,"sticky-header":!0,columns:s,data:g(d),loading:g(i),pagination:{showPageSize:!0}},{"name-filter":a(({filterValue:x,setFilterValue:P,handleFilterConfirm:N,handleFilterReset:w})=>[f("div",G,[e(T,{direction:"vertical"},{default:a(()=>[e(m,{"model-value":x[0],placeholder:"搜索IP地址...","allow-clear":"",onSearch:N,onClear:w,onInput:B=>P([B])},null,8,["model-value","onSearch","onClear","onInput"])]),_:2},1024)])]),_:1},8,["data","loading"])}}}),Y=R(X,[["__scopeId","data-v-214ce99f"]]),Z=f("p",null,"只展示前",-1),ee=f("p",null,"个",-1),ne=v({__name:"TopBanView",setup(p){const t=q(50);return(l,s)=>{const _=H,c=$,d=j,i=J,n=K,u=M,r=b;return I(),A(D,null,[e(_,{style:{"font-size":"1.2em"}},{default:a(()=>[o(" 此页面展示 PeerBanHelper 储存的封禁历史记录信息。 ")]),_:1}),e(i,null,{default:a(()=>[e(c,{heading:3},{default:a(()=>[o("被封禁频率最高的"+O(t.value)+"个 IP 地址",1)]),_:1}),e(d,null,{default:a(()=>[o(" 这是从数据库中记录的近14天的封禁历史中分析得来的数据。如果某些 IP 地址持续被多次封禁，则可以考虑使用系统防火墙屏蔽这些 IP，或者向其他人分享这些恶意 IP 地址，以帮助更多人改善他们的屏蔽规则。 ")]),_:1})]),_:1}),e(r,{fill:"",direction:"vertical"},{default:a(()=>[e(r,null,{default:a(()=>[Z,e(u,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=m=>t.value=m),"trigger-props":{autoFitPopupMinWidth:!0}},{default:a(()=>[e(n,{value:10},{default:a(()=>[o("10")]),_:1}),e(n,{value:20},{default:a(()=>[o("20")]),_:1}),e(n,{value:30},{default:a(()=>[o("30")]),_:1}),e(n,{value:40},{default:a(()=>[o("40")]),_:1}),e(n,{value:50},{default:a(()=>[o("50")]),_:1})]),_:1},8,["modelValue"]),ee]),_:1}),e(Y,{"top-number":t.value},null,8,["top-number"])]),_:1})],64)}}});export{ne as default};
