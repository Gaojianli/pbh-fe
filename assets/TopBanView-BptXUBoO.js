import{z as g,a1 as w,d as y,y as V,c as f,A as C,B as U,l as v,C as k,D as a,Q as z,f as e,H as h,a4 as F,K as L,L as b,a5 as R,R as q,r as A,n as D,F as E,J as H,a6 as J,u as t,v as O,T as j,a7 as K}from"./index-HIf1BXRR.js";import{O as M,b as Q}from"./index-BMAoY6C4.js";import{T as W}from"./index-Be2tlE1J.js";function $(u){const{endpoint:o}=g(),s=new URL(w(o,"api/maxbans"),location.href);return s.searchParams.set("num",String(u.num)),fetch(s).then(l=>l.json())}const G={class:"search-box"},X=y({__name:"top50Table",props:{topNumber:{type:Number,required:!0}},setup(u){const o=V(),s=g(),l=[{title:"IP地址",dataIndex:"address",filterable:{filter:(_,p)=>p.address.includes(_),slotName:"name-filter",icon:()=>F(R)}},{title:"历史封禁次数",dataIndex:"count"}],r=u,c=f(()=>r.topNumber),{data:d,loading:i,refresh:n}=C(()=>$({num:c.value}),{pollingInterval:f(()=>o.pollingInterval),onSuccess:o.renewLastUpdate});return U([c,()=>s.endpoint],()=>{n()}),(_,p)=>{const m=L,I=b,T=W;return v(),k(T,{stripe:!0,"sticky-header":!0,columns:l,data:h(d),loading:h(i),pagination:{showPageSize:!0}},{"name-filter":a(({filterValue:S,setFilterValue:x,handleFilterConfirm:P,handleFilterReset:N})=>[z("div",G,[e(I,{direction:"vertical"},{default:a(()=>[e(m,{"model-value":S[0],placeholder:"搜索IP地址...","allow-clear":"",onSearch:P,onClear:N,onInput:B=>x([B])},null,8,["model-value","onSearch","onClear","onInput"])]),_:2},1024)])]),_:1},8,["data","loading"])}}}),Y=q(X,[["__scopeId","data-v-214ce99f"]]),te=y({__name:"TopBanView",setup(u){const o=A(50);return(s,l)=>{const r=H,c=j,d=K,i=J,n=M,_=Q,p=b;return v(),D(E,null,[e(r,{style:{"font-size":"1.2em"}},{default:a(()=>[t(" 此页面展示 PeerBanHelper 储存的封禁历史记录信息。 ")]),_:1}),e(i,null,{default:a(()=>[e(c,{heading:3},{default:a(()=>[t("被封禁频率最高的"+O(o.value)+"个 IP 地址",1)]),_:1}),e(d,null,{default:a(()=>[t(" 这是从数据库中记录的近14天的封禁历史中分析得来的数据。如果某些 IP 地址持续被多次封禁，则可以考虑使用系统防火墙屏蔽这些 IP，或者向其他人分享这些恶意 IP 地址，以帮助更多人改善他们的屏蔽规则。 ")]),_:1})]),_:1}),e(p,{fill:"",direction:"vertical"},{default:a(()=>[e(p,null,{default:a(()=>[e(r,null,{default:a(()=>[t("只展示前")]),_:1}),e(_,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=m=>o.value=m),"trigger-props":{autoFitPopupMinWidth:!0}},{default:a(()=>[e(n,{value:10},{default:a(()=>[t("10")]),_:1}),e(n,{value:20},{default:a(()=>[t("20")]),_:1}),e(n,{value:30},{default:a(()=>[t("30")]),_:1}),e(n,{value:40},{default:a(()=>[t("40")]),_:1}),e(n,{value:50},{default:a(()=>[t("50")]),_:1})]),_:1},8,["modelValue"]),e(r,null,{default:a(()=>[t("个")]),_:1})]),_:1}),e(Y,{"top-number":o.value},null,8,["top-number"])]),_:1})],64)}}});export{te as default};
