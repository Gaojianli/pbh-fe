var An=Object.defineProperty;var Pn=(e,t,n)=>t in e?An(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var B=(e,t,n)=>(Pn(e,typeof t!="symbol"?t+"":t,n),n);import{a0 as Nn,a1 as D,a2 as Yt,a3 as Me,r as A,H as de,c as L,e as P,a4 as x,a5 as me,h as w,q as I,C as l,y as b,N as _,a6 as u,v as i,j as E,n as Q,l as G,m as j,s as X,w as ue,F as he,O as ht,a7 as Mn,a8 as Un,o as Zt,a9 as zn,aa as jn,ab as Xt,ac as En,k as Rn,Q as xn,a as Qt,ad as On,ae as Bn,af as Dn,ag as _t,ah as qn,ai as Hn,K as Vn,L as Fn,M as Wn,$ as Kn,aj as Gn,ak as Jn}from"./libs-Bxwrvp7s.js";import{d as Yn,l as Zn,T as J,P as en,S as H,a as Ce,M as je,_ as ee,g as te,i as ne,b as Ie,c as tn,e as nn,f as Ee,h as Re,D as vt,I as Xn,j as Qn,k as ea,m as ta,B as xe,n as yt,C as kt,o as wt,R as St,p as na,G as aa,q as oa,u as $t,L as Tt,r as an,s as ra,E as on,t as sa,v as la,w as rn,x as ia,y as sn,z as ln,O as ca,A as ua,F as Lt,H as W,J as cn,K as Fe,N as da,Q as We,U as un,V as pa,W as ma,X as ga,Y as fa,Z as ba,$ as ha,a0 as _a,a1 as va,a2 as ya,a3 as ka,a4 as wa,a5 as Sa,a6 as $a,a7 as Ta,a8 as La,a9 as Ca,aa as Ia,ab as Aa,ac as Pa,ad as Na}from"./arcoDesign-CiM7Vjjh.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const De={formatYear:"YYYY",formatMonth:"MMM YYYY",today:"Today",view:{month:"Month",year:"Year",week:"Week",day:"Day"},month:{long:{January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December"},short:{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sept",October:"Oct",November:"Nov",December:"Dec"}},week:{long:{self:"Week",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},short:{self:"Week",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"}}},Ma={locale:"en-US",empty:{description:"No Data"},drawer:{okText:"Ok",cancelText:"Cancel"},popconfirm:{okText:"Ok",cancelText:"Cancel"},modal:{okText:"Ok",cancelText:"Cancel"},pagination:{goto:"Goto",page:"Page",countPerPage:" / Page",total:"Total: {0}"},table:{okText:"Ok",resetText:"Reset"},upload:{start:"Start",cancel:"Cancel",delete:"Delete",retry:"Click to retry",buttonText:"Upload",preview:"Preview",drag:"Click or drag file to this area to upload",dragHover:"Release to upload",error:"Upload Error"},calendar:De,datePicker:{view:De.view,month:De.month,week:De.week,placeholder:{date:"Please select date",week:"Please select week",month:"Please select month",year:"Please select year",quarter:"Please select quarter",time:"Please select time"},rangePlaceholder:{date:["Start date","End date"],week:["Start week","End week"],month:["Start month","End month"],year:["Start year","End year"],quarter:["Start quarter","End quarter"],time:["Start time","End time"]},selectTime:"Select time",today:"Today",now:"Now",ok:"Ok"},image:{loading:"loading"},imagePreview:{fullScreen:"Full Screen",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",zoomIn:"Zoom In",zoomOut:"Zoom Out",originalSize:"Original Size"},typography:{copied:"Copied",copy:"Copy",expand:"Expand",collapse:"Collapse",edit:"Edit"},form:{validateMessages:Yn},colorPicker:{history:"History Colors",preset:"Preset Colors",empty:"Empty"}},Ua={"settings.navbar.theme.toLight":"Click to use light mode","settings.navbar.theme.toDark":"Click to use dark mode","settings.language":"Language","settings.modal.title":"Settings","settings.modal.endpointTips":"If you can't access the backend of the PBH, you can try to set the Endpoint here","settings.modal.accessTokenTips":'You can set the <a href="https://github.com/settings/tokens">access token</a> at here',"settings.modal.pollInterval":"Polling interval:","settings.endpoint.error":"Cannot connect to the backend, please check the Endpoint settings","settings.accessToken.error":"Failed to get version, please check your network or try to set the access token in settings."},za={"page.dashboard.description":"This page displays the basic data since PeerBanHelper started.","page.dashboard.clientStatus.title":"Connected Downloaders","page.dashboard.clientStatus.card.title":"Downloader Status","page.dashboard.clientStatus.card.status":"Status","page.dashboard.clientStatus.card.type":"Type","page.dashboard.clientStatus.card.status.normal":"Normal - Status is good","page.dashboard.clientStatus.card.status.error":"Error - Error occurred when communicating with the client, please check the log file","page.dashboard.clientStatus.card.status.unknown":"Unknown - PeerBanHelper may not have communicated with this client yet","page.dashboard.clientStatus.card.status.torrentNumber":"Active Torrents","page.dashboard.clientStatus.card.status.peerNumber":"Connected Peers","page.dashboard.statics.currentStatus":"Current Status","page.dashboard.statics.checked":"Total checked","page.dashboard.statics.times":"times","page.dashboard.statics.banPeer":"Ban Peers","page.dashboard.statics.unbanPeer":"Unban Peers","page.dashboard.statics.currentBan":"Currently banned Peers","page.dashboard.statics.number":"","page.dashboard.torrentList.title":"Active Torrent List","page.dashboard.torrentList.tips":"Click to view the active torrent list","page.dashboard.torrentList.column.name":"Name","page.dashboard.torrentList.column.size":"Size","page.dashboard.torrentList.column.hash":"Hash","page.dashboard.torrentList.column.progress":"Progress"},ja={"page.banlist.banlist":"Ban List","page.banlist.banlist.description":"Following is the ban list (sorted by time descending)","page.banlist.banlist.searchPlaceHolder":"Search an IP address","page.banlist.banlist.listItem.reserveDNSLookup":"Reverse DNS Lookup","page.banlist.banlist.listItem.banTime":"Ban Time","page.banlist.banlist.listItem.expireTime":"Unban Time","page.banlist.banlist.listItem.location":"Torrent","page.banlist.banlist.listItem.snapshot":"Snapshot","page.banlist.banlist.listItem.reason":"Ban Reason","page.banlist.banlist.listItem.geo":"Geo Location","page.banlist.banlist.listItem.asn":"ASN","page.banlist.banlist.listItem.asn.subnet":"ASN Subnet: ","page.banlist.banlist.listItem.empty":"Empty","page.banlist.banlist.bottomReached":"No more data!"},Ea={"page.banlog.description":"This page shows the ban log information stored by PeerBanHelper.","page.banlog.banlogTable.notUnbanned":"Not Unbanned yet","page.banlog.banlogTable.column.banTime":"Ban Time","page.banlog.banlogTable.column.unbanTime":"Unban Time","page.banlog.banlogTable.column.peerAddress":"Peer Address","page.banlog.banlogTable.column.peerId":"Peer ID","page.banlog.banlogTable.column.trafficSnapshot":"Traffic Snapshot","page.banlog.banlogTable.column.torrentName":"Torrent Name","page.banlog.banlogTable.column.torrentSize":"Size","page.banlog.banlogTable.column.description":"Description"},Ra={"page.topban.description":"This page shows the ban history stored by PeerBanHelper.","page.topban.title":"Top {topNumber} most frequently banned IP addresses","page.topban.usage":"This data is analyzed from the ban history recorded in the database in the past 14 days. If some IP addresses are repeatedly banned, you may consider using the system firewall to block these IPs, or share these malicious IP addresses with others to help more people improve their blocking rules.","page.topban.onlyShow":"Only show the first","page.topban.onlyShow.number":"","page.topban.top50Table.searchPlaceholder":"Search IP address...","page.topban.top50Table.column.ipaddress":"IP Address","page.topban.top50Table.column.historyCount":"History Ban Count"},xa={"page.ruleMetrices.title":"Rule metrics","page.ruleMetrices.description":"The following is the rule statistics information, you can improve your rule through following information.","page.ruleMetrices.metricsTable.filter":"Show hit rules only","page.ruleMetrices.metricsTable.column.type":"Rule Type","page.ruleMetrices.metricsTable.column.content":"Rule Content","page.ruleMetrices.metricsTable.column.run":"Run Times","page.ruleMetrices.metricsTable.column.hit":"Hit Times"},Oa={"service.manifest.networkError":"Network failure, unable to initiate request","service.manifest.parseError":"Unable to parse the data, please check whether the endpoint is correct","service.manifest.formatError":"The response format is incorrect, please check the backend version"},Ba={"login.form.login.success":"Login success","login.form.title":"Login to PeerBanHelper","login.form.password.placeholder":"Please enter the management token","login.form.rememberPassword":"Remember token","login.form.forgetPassword":"Forget token","login.form.password.errMsg":"Please enter the management token","login.form.login.failed":"Login Failed:","login.form.login":"Login"},Da={"page.ruleSubscribe.description":"You can manage online rules subscriptions here.","page.ruleSubscribe.addRule":"Add Subscription","page.ruleSubscribe.updateAll":"Update all","page.ruleSubscribe.settingsTips":"Auto update settings","page.ruleSubscribe.updateLog":"Update Log","page.ruleSubscribe.column.ruleName":"Rule Name","page.ruleSubscribe.column.lastUpdated":"Last Updated","page.ruleSubscribe.column.notUpdated":"Never","page.ruleSubscribe.column.status":"Enabled","page.ruleSubscribe.column.actions":"Actions","page.ruleSubscribe.column.actions.edit":"Edit","page.ruleSubscribe.column.actions.update":"Update","page.ruleSubscribe.editModal.title":"Edit Rule","page.ruleSubscribe.editModal.title.new":"New Rule","page.ruleSubscribe.editModal.form.name":"Rule Name","page.ruleSubscribe.editModal.form.id.extra":"Rule ID, should be unique","page.ruleSubscribe.editModal.form.name.required":"Please input rule name","page.ruleSubscribe.column.rulesCount":"Rules","page.ruleSubscribe.column.deleteConfirm":"Are you sure you want to delete?","page.ruleSubscribe.settingsModal.title":"Subscribe Settings","page.ruleSubscribe.settingsModal.checkInterval":"Update Interval","page.ruleSubscribe.updateLog.updateTime":"Update at","page.ruleSubscribe.updateLog.ruleCount":"Rules Count","page.ruleSubscribe.updateLog.updateType":"Type","page.ruleSubscribe.updateLog.updateType.auto":"Auto","page.ruleSubscribe.updateLog.updateType.manual":"Manual","page.ruleSubscribe.updateLog.updateType.unknown":"Unknown"},qa={"navbar.action.locale":"Switch to English","navbar.action.autoUpdate":"Auto Update","navbar.action.autoUpdate.lastUpdate":"Last updated at: ","main.workInProgressTips":"This feature is still working in progress, and the data currently recorded and displayed is relatively limited","router.login":"Login","router.dashboard":"Status","router.banlist":"Ban List","router.banlogs":"Ban Logs","router.topban":"Top Bans","router.ruleMetrics":"Rule Metrics","router.ruleSubscribe":"Rule Subscription","router.moduleNotEnable":"{moduleName} is not enabled","router.moduleNotEnable.tips":"Please enable the feature in the configuration file","router.moduleNotEnable.viewDoc":"View Documentation",...Ua,...za,...ja,...Ea,...Ra,...xa,...Oa,...Ba,...Da},Ha={"settings.navbar.theme.toLight":"点击切换为亮色模式","settings.navbar.theme.toDark":"点击切换为暗黑模式","settings.language":"语言","settings.modal.title":"设置","settings.modal.endpointTips":"如果你无法访问PBH后端，可以尝试在此设置Endpoint","settings.modal.pollInterval":"轮询间隔：","settings.endpoint.error":"无法连接到后端，请检查Endpoint设置","settings.modal.accessTokenTips":'你可以在这里填写 <a href="https://github.com/settings/tokens">Github Access Token</a>',"settings.accessToken.error":"无法获取版本信息，请检查网络或尝试在设置中设置访问令牌"},Va={"page.dashboard.description":"此页面展示 PeerBanHelper 自启动以来的基本数据。","page.dashboard.clientStatus.title":"已连接的下载器","page.dashboard.clientStatus.card.title":"下载器状态","page.dashboard.clientStatus.card.status":"状态","page.dashboard.clientStatus.card.type":"类型","page.dashboard.clientStatus.card.status.normal":"正常 - 状态良好","page.dashboard.clientStatus.card.status.error":"错误 - 与客户端通信时出错，请检查日志文件","page.dashboard.clientStatus.card.status.unknown":"未知 - PeerBanHelper 可能还没有与此客户端通信","page.dashboard.clientStatus.card.status.torrentNumber":"活动种子数","page.dashboard.clientStatus.card.status.peerNumber":"已连接的Peers","page.dashboard.statics.currentStatus":"当前状态","page.dashboard.statics.checked":"共检查","page.dashboard.statics.times":"次","page.dashboard.statics.banPeer":"封禁Peer","page.dashboard.statics.unbanPeer":"解除已到期的封禁","page.dashboard.statics.currentBan":"当前处于封禁状态Peer","page.dashboard.statics.number":"个","page.dashboard.torrentList.title":"活动种子列表","page.dashboard.torrentList.tips":"点击查看活动种子列表","page.dashboard.torrentList.column.name":"名称","page.dashboard.torrentList.column.size":"大小","page.dashboard.torrentList.column.hash":"Hash","page.dashboard.torrentList.column.progress":"进度"},Fa={"page.banlist.banlist":"封禁名单","page.banlist.banlist.description":"以下是封禁列表（按时间倒序排列）","page.banlist.banlist.searchPlaceHolder":"搜索 IP 地址","page.banlist.banlist.listItem.reserveDNSLookup":"反向 DNS 解析","page.banlist.banlist.listItem.banTime":"封禁时间","page.banlist.banlist.listItem.expireTime":"预计解封时间","page.banlist.banlist.listItem.location":"发现位置","page.banlist.banlist.listItem.snapshot":"封禁快照","page.banlist.banlist.listItem.reason":"封禁原因","page.banlist.banlist.listItem.geo":"地理位置","page.banlist.banlist.listItem.asn":"ASN","page.banlist.banlist.listItem.asn.subnet":"子网：","page.banlist.banlist.listItem.empty":"空","page.banlist.banlist.bottomReached":"已经到底啦！"},Wa={"page.banlog.description":" 此页面展示 PeerBanHelper 储存的封禁历史记录信息。","page.banlog.banlogTable.notUnbanned":"未解封","page.banlog.banlogTable.column.banTime":"封禁时间","page.banlog.banlogTable.column.unbanTime":"解封时间","page.banlog.banlogTable.column.peerAddress":"Peer 地址","page.banlog.banlogTable.column.peerId":"Peer ID","page.banlog.banlogTable.column.trafficSnapshot":"流量快照","page.banlog.banlogTable.column.torrentName":"种子名","page.banlog.banlogTable.column.torrentSize":"大小","page.banlog.banlogTable.column.description":"描述"},Ka={"page.topban.description":"此页面展示 PeerBanHelper 储存的封禁历史记录信息。","page.topban.title":"被封禁频率最高的{topNumber}个 IP 地址","page.topban.usage":"这是从数据库中记录的近14天的封禁历史中分析得来的数据。如果某些 IP 地址持续被多次封禁，则可以考虑使用系统防火墙屏蔽这些 IP，或者向其他人分享这些恶意 IP 地址，以帮助更多人改善他们的屏蔽规则。","page.topban.onlyShow":"只展示前","page.topban.onlyShow.number":"个","page.topban.top50Table.searchPlaceholder":"搜索IP地址...","page.topban.top50Table.column.ipaddress":"IP 地址","page.topban.top50Table.column.historyCount":"历史封禁次数"},Ga={"page.ruleMetrices.title":"规则统计","page.ruleMetrices.description":"以下是规则统计信息，你可以通过规则命中次数（封禁次数）和运行次数来评估规则的有效性。","page.ruleMetrices.metricsTable.filter":"仅显示命中过的规则","page.ruleMetrices.metricsTable.column.type":"规则类型","page.ruleMetrices.metricsTable.column.content":"规则内容","page.ruleMetrices.metricsTable.column.run":"运行次数","page.ruleMetrices.metricsTable.column.hit":"命中次数"},Ja={"service.manifest.networkError":"网络故障，无法发起请求","service.manifest.parseError":"无法解析接口返回数据，请检查服务地址是否正确","service.manifest.formatError":"后端接口响应格式错误，请检查后端版本"},Ya={"login.form.login.success":"登录成功","login.form.title":"登录到 PeerBanHelper","login.form.password.placeholder":"请输入管理 Token","login.form.rememberPassword":"记住 Token","login.form.forgetPassword":"忘记 Token","login.form.password.errMsg":"请输入管理 Token","login.form.login.failed":"登录失败：","login.form.login":"登录"},Za={"page.ruleSubscribe.description":"你可以在此处管理订阅的在线规则","page.ruleSubscribe.updateAll":"更新全部","page.ruleSubscribe.settingsTips":"自动更新设置","page.ruleSubscribe.updateLog":"更新记录","page.ruleSubscribe.column.ruleName":"规则名称","page.ruleSubscribe.column.lastUpdated":"最后更新","page.ruleSubscribe.column.notUpdated":"无","page.ruleSubscribe.column.status":"启用状态","page.ruleSubscribe.column.actions":"操作","page.ruleSubscribe.column.actions.edit":"编辑","page.ruleSubscribe.column.actions.update":"更新","page.ruleSubscribe.editModal.title":"编辑规则","page.ruleSubscribe.editModal.title.new":"新建规则","page.ruleSubscribe.editModal.form.name":"规则名称","page.ruleSubscribe.editModal.form.id.extra":"规则ID，不允许重复","page.ruleSubscribe.editModal.form.name.required":"请输入规则名称","page.ruleSubscribe.addRule":"新增订阅","page.ruleSubscribe.column.rulesCount":"规则数量","page.ruleSubscribe.column.deleteConfirm":"确定删除这条规则吗？","page.ruleSubscribe.settingsModal.title":"订阅设置","page.ruleSubscribe.settingsModal.checkInterval":"更新间隔","page.ruleSubscribe.updateLog.updateTime":"更新时间","page.ruleSubscribe.updateLog.ruleCount":"规则数量","page.ruleSubscribe.updateLog.updateType":"更新类型","page.ruleSubscribe.updateLog.updateType.auto":"自动更新","page.ruleSubscribe.updateLog.updateType.manual":"手动更新","page.ruleSubscribe.updateLog.updateType.unknown":"未知"},Xa={"navbar.action.locale":"切换为中文","navbar.action.autoUpdate":"自动刷新","navbar.action.autoUpdate.lastUpdate":"最后更新于：","main.workInProgressTips":"请注意，此功能仍在施工中，目前记录和展示的数据较为有限。","router.login":"登录","router.dashboard":"状态","router.banlist":"封禁名单","router.banlogs":"封禁日志","router.topban":"最多封禁","router.ruleMetrics":"规则统计","router.ruleSubscribe":"规则订阅","router.moduleNotEnable":"{moduleName}功能未启用","router.moduleNotEnable.tips":"请在配置文件中开启相关功能","router.moduleNotEnable.viewDoc":"查看文档",...Ha,...Va,...Fa,...Wa,...Ka,...Ga,...Ja,...Ya,...Za},Qa=[{label:"中文",value:"zh-CN"},{label:"English",value:"en-US"}];function dn(){return navigator.language.includes("zh")?"zh-CN":"en-US"}const Mt={short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},longlong:{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}},eo=Nn({locale:dn(),fallbackLocale:"en-US",legacy:!1,messages:{"en-US":qa,"zh-CN":Xa},datetimeFormats:{"en-US":Mt,"zh-CN":Mt}}),to={"en-US":Ma,"zh-CN":Zn};function q(e=!0){var o;const{authToken:t}=N(),n=((o=document.querySelector("html"))==null?void 0:o.getAttribute("lang"))||dn(),a=new Headers;return a.set("Accept-Language",n),e&&a.set("Authorization",`Bearer ${t}`),a}function no(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pn={exports:{}},O=pn.exports={},ie,ce;function dt(){throw new Error("setTimeout has not been defined")}function pt(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ie=setTimeout:ie=dt}catch{ie=dt}try{typeof clearTimeout=="function"?ce=clearTimeout:ce=pt}catch{ce=pt}})();function mn(e){if(ie===setTimeout)return setTimeout(e,0);if((ie===dt||!ie)&&setTimeout)return ie=setTimeout,setTimeout(e,0);try{return ie(e,0)}catch{try{return ie.call(null,e,0)}catch{return ie.call(this,e,0)}}}function ao(e){if(ce===clearTimeout)return clearTimeout(e);if((ce===pt||!ce)&&clearTimeout)return ce=clearTimeout,clearTimeout(e);try{return ce(e)}catch{try{return ce.call(null,e)}catch{return ce.call(this,e)}}}var pe=[],Se=!1,ve,qe=-1;function oo(){!Se||!ve||(Se=!1,ve.length?pe=ve.concat(pe):qe=-1,pe.length&&gn())}function gn(){if(!Se){var e=mn(oo);Se=!0;for(var t=pe.length;t;){for(ve=pe,pe=[];++qe<t;)ve&&ve[qe].run();qe=-1,t=pe.length}ve=null,Se=!1,ao(e)}}O.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];pe.push(new fn(e,t)),pe.length===1&&!Se&&mn(gn)};function fn(e,t){this.fun=e,this.array=t}fn.prototype.run=function(){this.fun.apply(null,this.array)};O.title="browser";O.browser=!0;O.env={};O.argv=[];O.version="";O.versions={};function ge(){}O.on=ge;O.addListener=ge;O.once=ge;O.off=ge;O.removeListener=ge;O.removeAllListeners=ge;O.emit=ge;O.prependListener=ge;O.prependOnceListener=ge;O.listeners=function(e){return[]};O.binding=function(e){throw new Error("process.binding is not supported")};O.cwd=function(){return"/"};O.chdir=function(e){throw new Error("process.chdir is not supported")};O.umask=function(){return 0};var ro=pn.exports;const ke=no(ro);function Ke(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof ke=="object"&&ke.version!==void 0?`Node.js/${ke.version.substr(1)} (${ke.platform}; ${ke.arch})`:"<environment undetectable>"}function Ct(e,t,n,a){if(typeof n!="function")throw new Error("method for before hook must be a function");return a||(a={}),Array.isArray(t)?t.reverse().reduce((o,s)=>Ct.bind(null,e,s,o,a),n)():Promise.resolve().then(()=>e.registry[t]?e.registry[t].reduce((o,s)=>s.hook.bind(null,o,a),n)():n(a))}function so(e,t,n,a){const o=a;e.registry[n]||(e.registry[n]=[]),t==="before"&&(a=(s,r)=>Promise.resolve().then(o.bind(null,r)).then(s.bind(null,r))),t==="after"&&(a=(s,r)=>{let c;return Promise.resolve().then(s.bind(null,r)).then(d=>(c=d,o(c,r))).then(()=>c)}),t==="error"&&(a=(s,r)=>Promise.resolve().then(s.bind(null,r)).catch(c=>o(c,r))),e.registry[n].push({hook:a,orig:o})}function lo(e,t,n){if(!e.registry[t])return;const a=e.registry[t].map(o=>o.orig).indexOf(n);a!==-1&&e.registry[t].splice(a,1)}const Ut=Function.bind,zt=Ut.bind(Ut);function bn(e,t,n){const a=zt(lo,null).apply(null,n?[t,n]:[t]);e.api={remove:a},e.remove=a,["before","error","after","wrap"].forEach(o=>{const s=n?[t,o,n]:[t,o];e[o]=e.api[o]=zt(so,null).apply(null,s)})}function io(){const e=Symbol("Singular"),t={registry:{}},n=Ct.bind(null,t,e);return bn(n,t,e),n}function co(){const e={registry:{}},t=Ct.bind(null,e);return bn(t,e),t}const uo={Singular:io,Collection:co};var po="0.0.0-development",mo=`octokit-endpoint.js/${po} ${Ke()}`,go={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":mo},mediaType:{format:""}};function fo(e){return e?Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{}):{}}function bo(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}function hn(e,t){const n=Object.assign({},e);return Object.keys(t).forEach(a=>{bo(t[a])?a in e?n[a]=hn(e[a],t[a]):Object.assign(n,{[a]:t[a]}):Object.assign(n,{[a]:t[a]})}),n}function jt(e){for(const t in e)e[t]===void 0&&delete e[t];return e}function mt(e,t,n){var o;if(typeof t=="string"){let[s,r]=t.split(" ");n=Object.assign(r?{method:s,url:r}:{url:s},n)}else n=Object.assign({},t);n.headers=fo(n.headers),jt(n),jt(n.headers);const a=hn(e||{},n);return n.url==="/graphql"&&(e&&((o=e.mediaType.previews)!=null&&o.length)&&(a.mediaType.previews=e.mediaType.previews.filter(s=>!a.mediaType.previews.includes(s)).concat(a.mediaType.previews)),a.mediaType.previews=(a.mediaType.previews||[]).map(s=>s.replace(/-preview/,""))),a}function ho(e,t){const n=/\?/.test(e)?"&":"?",a=Object.keys(t);return a.length===0?e:e+n+a.map(o=>o==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${o}=${encodeURIComponent(t[o])}`).join("&")}var _o=/\{[^}]+\}/g;function vo(e){return e.replace(/^\W+|\W+$/g,"").split(/,/)}function yo(e){const t=e.match(_o);return t?t.map(vo).reduce((n,a)=>n.concat(a),[]):[]}function Et(e,t){const n={__proto__:null};for(const a of Object.keys(e))t.indexOf(a)===-1&&(n[a]=e[a]);return n}function _n(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function we(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function Pe(e,t,n){return t=e==="+"||e==="#"?_n(t):we(t),n?we(n)+"="+t:t}function ye(e){return e!=null}function Je(e){return e===";"||e==="&"||e==="?"}function ko(e,t,n,a){var o=e[n],s=[];if(ye(o)&&o!=="")if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")o=o.toString(),a&&a!=="*"&&(o=o.substring(0,parseInt(a,10))),s.push(Pe(t,o,Je(t)?n:""));else if(a==="*")Array.isArray(o)?o.filter(ye).forEach(function(r){s.push(Pe(t,r,Je(t)?n:""))}):Object.keys(o).forEach(function(r){ye(o[r])&&s.push(Pe(t,o[r],r))});else{const r=[];Array.isArray(o)?o.filter(ye).forEach(function(c){r.push(Pe(t,c))}):Object.keys(o).forEach(function(c){ye(o[c])&&(r.push(we(c)),r.push(Pe(t,o[c].toString())))}),Je(t)?s.push(we(n)+"="+r.join(",")):r.length!==0&&s.push(r.join(","))}else t===";"?ye(o)&&s.push(we(n)):o===""&&(t==="&"||t==="?")?s.push(we(n)+"="):o===""&&s.push("");return s}function wo(e){return{expand:So.bind(null,e)}}function So(e,t){var n=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(a,o,s){if(o){let c="";const d=[];if(n.indexOf(o.charAt(0))!==-1&&(c=o.charAt(0),o=o.substr(1)),o.split(/,/g).forEach(function(g){var m=/([^:\*]*)(?::(\d+)|(\*))?/.exec(g);d.push(ko(t,c,m[1],m[2]||m[3]))}),c&&c!=="+"){var r=",";return c==="?"?r="&":c!=="#"&&(r=c),(d.length!==0?c:"")+d.join(r)}else return d.join(",")}else return _n(s)}),e==="/"?e:e.replace(/\/$/,"")}function vn(e){var m;let t=e.method.toUpperCase(),n=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),a=Object.assign({},e.headers),o,s=Et(e,["method","baseUrl","url","headers","request","mediaType"]);const r=yo(n);n=wo(n).expand(s),/^http/.test(n)||(n=e.baseUrl+n);const c=Object.keys(e).filter(p=>r.includes(p)).concat("baseUrl"),d=Et(s,c);if(!/application\/octet-stream/i.test(a.accept)&&(e.mediaType.format&&(a.accept=a.accept.split(/,/).map(p=>p.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),n.endsWith("/graphql")&&(m=e.mediaType.previews)!=null&&m.length)){const p=a.accept.match(/[\w-]+(?=-preview)/g)||[];a.accept=p.concat(e.mediaType.previews).map(f=>{const v=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${f}-preview${v}`}).join(",")}return["GET","HEAD"].includes(t)?n=ho(n,d):"data"in d?o=d.data:Object.keys(d).length&&(o=d),!a["content-type"]&&typeof o<"u"&&(a["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof o>"u"&&(o=""),Object.assign({method:t,url:n,headers:a},typeof o<"u"?{body:o}:null,e.request?{request:e.request}:null)}function $o(e,t,n){return vn(mt(e,t,n))}function yn(e,t){const n=mt(e,t),a=$o.bind(null,n);return Object.assign(a,{DEFAULTS:n,defaults:yn.bind(null,n),merge:mt.bind(null,n),parse:vn})}var To=yn(null,go);class Ne extends Error{constructor(n,a,o){super(n);B(this,"name");B(this,"status");B(this,"request");B(this,"response");Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=a,"response"in o&&(this.response=o.response);const s=Object.assign({},o.request);o.request.headers.authorization&&(s.headers=Object.assign({},o.request.headers,{authorization:o.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),s.url=s.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=s}}var Lo="0.0.0-development";function Co(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);if(t===null)return!0;const n=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Function.prototype.call(n)===Function.prototype.call(e)}function Io(e){return e.arrayBuffer()}function Rt(e){var c,d,g,m;const t=e.request&&e.request.log?e.request.log:console,n=((c=e.request)==null?void 0:c.parseSuccessResponseBody)!==!1;(Co(e.body)||Array.isArray(e.body))&&(e.body=JSON.stringify(e.body));let a={},o,s,{fetch:r}=globalThis;if((d=e.request)!=null&&d.fetch&&(r=e.request.fetch),!r)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");return r(e.url,{method:e.method,body:e.body,redirect:(g=e.request)==null?void 0:g.redirect,headers:Object.fromEntries(Object.entries(e.headers).map(([p,f])=>[p,String(f)])),signal:(m=e.request)==null?void 0:m.signal,...e.body&&{duplex:"half"}}).then(async p=>{s=p.url,o=p.status;for(const f of p.headers)a[f[0]]=f[1];if("deprecation"in a){const f=a.link&&a.link.match(/<([^>]+)>; rel="deprecation"/),v=f&&f.pop();t.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${a.sunset}${v?`. See ${v}`:""}`)}if(!(o===204||o===205)){if(e.method==="HEAD"){if(o<400)return;throw new Ne(p.statusText,o,{response:{url:s,status:o,headers:a,data:void 0},request:e})}if(o===304)throw new Ne("Not modified",o,{response:{url:s,status:o,headers:a,data:await Ye(p)},request:e});if(o>=400){const f=await Ye(p);throw new Ne(Ao(f),o,{response:{url:s,status:o,headers:a,data:f},request:e})}return n?await Ye(p):p.body}}).then(p=>({status:o,url:s,headers:a,data:p})).catch(p=>{if(p instanceof Ne)throw p;if(p.name==="AbortError")throw p;let f=p.message;throw p.name==="TypeError"&&"cause"in p&&(p.cause instanceof Error?f=p.cause.message:typeof p.cause=="string"&&(f=p.cause)),new Ne(f,500,{request:e})})}async function Ye(e){const t=e.headers.get("content-type");return/application\/json/.test(t)?e.json().catch(()=>e.text()).catch(()=>""):!t||/^text\/|charset=utf-8$/.test(t)?e.text():Io(e)}function Ao(e){if(typeof e=="string")return e;let t;return"documentation_url"in e?t=` - ${e.documentation_url}`:t="","message"in e?Array.isArray(e.errors)?`${e.message}: ${e.errors.map(JSON.stringify).join(", ")}${t}`:`${e.message}${t}`:`Unknown error: ${JSON.stringify(e)}`}function gt(e,t){const n=e.defaults(t);return Object.assign(function(o,s){const r=n.merge(o,s);if(!r.request||!r.request.hook)return Rt(n.parse(r));const c=(d,g)=>Rt(n.parse(n.merge(d,g)));return Object.assign(c,{endpoint:n,defaults:gt.bind(null,n)}),r.request.hook(c,r)},{endpoint:n,defaults:gt.bind(null,n)})}var ft=gt(To,{headers:{"user-agent":`octokit-request.js/${Lo} ${Ke()}`}}),Po="0.0.0-development";function No(e){return`Request failed due to following response errors:
`+e.errors.map(t=>` - ${t.message}`).join(`
`)}var Mo=class extends Error{constructor(t,n,a){super(No(a));B(this,"name","GraphqlResponseError");B(this,"errors");B(this,"data");this.request=t,this.headers=n,this.response=a,this.errors=a.errors,this.data=a.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Uo=["method","baseUrl","url","headers","request","query","mediaType"],zo=["query","method","url"],xt=/\/api\/v3\/?$/;function jo(e,t,n){if(n){if(typeof t=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const r in n)if(zo.includes(r))return Promise.reject(new Error(`[@octokit/graphql] "${r}" cannot be used as variable name`))}const a=typeof t=="string"?Object.assign({query:t},n):t,o=Object.keys(a).reduce((r,c)=>Uo.includes(c)?(r[c]=a[c],r):(r.variables||(r.variables={}),r.variables[c]=a[c],r),{}),s=a.baseUrl||e.endpoint.DEFAULTS.baseUrl;return xt.test(s)&&(o.url=s.replace(xt,"/api/graphql")),e(o).then(r=>{if(r.data.errors){const c={};for(const d of Object.keys(r.headers))c[d]=r.headers[d];throw new Mo(o,c,r.data)}return r.data.data})}function It(e,t){const n=e.defaults(t);return Object.assign((o,s)=>jo(n,o,s),{defaults:It.bind(null,n),endpoint:n.endpoint})}It(ft,{headers:{"user-agent":`octokit-graphql.js/${Po} ${Ke()}`},method:"POST",url:"/graphql"});function Eo(e){return It(e,{method:"POST",url:"/graphql"})}var Ro=/^v1\./,xo=/^ghs_/,Oo=/^ghu_/;async function Bo(e){const t=e.split(/\./).length===3,n=Ro.test(e)||xo.test(e),a=Oo.test(e);return{type:"token",token:e,tokenType:t?"app":n?"installation":a?"user-to-server":"oauth"}}function Do(e){return e.split(/\./).length===3?`bearer ${e}`:`token ${e}`}async function qo(e,t,n,a){const o=t.endpoint.merge(n,a);return o.headers.authorization=Do(e),t(o)}var Ho=function(t){if(!t)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof t!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return t=t.replace(/^(token|bearer) +/i,""),Object.assign(Bo.bind(null,t),{hook:qo.bind(null,t)})};const kn="6.1.2",Ot=()=>{},Vo=console.warn.bind(console),Fo=console.error.bind(console),Bt=`octokit-core.js/${kn} ${Ke()}`;class bt{constructor(t={}){B(this,"request");B(this,"graphql");B(this,"log");B(this,"hook");B(this,"auth");const n=new uo.Collection,a={baseUrl:ft.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(a.headers["user-agent"]=t.userAgent?`${t.userAgent} ${Bt}`:Bt,t.baseUrl&&(a.baseUrl=t.baseUrl),t.previews&&(a.mediaType.previews=t.previews),t.timeZone&&(a.headers["time-zone"]=t.timeZone),this.request=ft.defaults(a),this.graphql=Eo(this.request).defaults(a),this.log=Object.assign({debug:Ot,info:Ot,warn:Vo,error:Fo},t.log),this.hook=n,t.authStrategy){const{authStrategy:s,...r}=t,c=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:r},t.auth));n.wrap("request",c.hook),this.auth=c}else if(!t.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=Ho(t.auth);n.wrap("request",s.hook),this.auth=s}const o=this.constructor;for(let s=0;s<o.plugins.length;++s)Object.assign(this,o.plugins[s](this,t))}static defaults(t){return class extends this{constructor(...a){const o=a[0]||{};if(typeof t=="function"){super(t(o));return}super(Object.assign({},t,o,o.userAgent&&t.userAgent?{userAgent:`${o.userAgent} ${t.userAgent}`}:null))}}}static plugin(...t){var o;const n=this.plugins;return o=class extends this{},B(o,"plugins",n.concat(t.filter(s=>!n.includes(s)))),o}}B(bt,"VERSION",kn),B(bt,"plugins",[]);const Ue=class Ue extends Error{constructor(n,a=!0){super(n);B(this,"name",Ue.name);this.isApiWrong=a}static is(n){return(n==null?void 0:n.name)===Ue.name}};B(Ue,"name","GetManifestError");let $e=Ue;function Wo(e=N().accessToken){return new bt({auth:e}).request("GET /repos/{owner}/{repo}/releases/latest",{owner:"PBH-BTN",repo:"PeerBanHelper",headers:{"X-GitHub-Api-Version":"2022-11-28"}}).then(n=>n.data)}function Ko(e=N().endpoint){const t=new URL(D(e,"/api/metadata/manifest"),location.href);return fetch(t,{headers:q(!1)}).catch(()=>{throw new $e("service.manifest.networkError",!1)}).then(n=>n.json().catch(()=>{throw new $e("service.manifest.parseError")})).then(n=>{if(!Array.isArray(n.modules)||typeof n.version!="object")throw new $e("service.manifest.formatError");return n})}const ze=class ze extends Error{constructor(){super(...arguments);B(this,"name",ze.name)}static is(n){return(n==null?void 0:n.name)===ze.name}};B(ze,"name","IncorrectTokenError");let be=ze;async function Go(e){const t=N(),n=new URL(D(t.endpoint,"/api/auth/login"),location.href);return fetch(n,{headers:q(!1),method:"POST",body:JSON.stringify({token:e})}).then(async a=>{const o=await a.json();if(a.status===401)throw new be(o.message);if(a.status!==200)throw new Error(o.message)})}const Jo=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,Dt=e=>{if(typeof e!="string")throw new TypeError("Invalid argument expected string");const t=e.match(Jo);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},qt=e=>e==="*"||e==="x"||e==="X",Ht=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},Yo=(e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t],Zo=(e,t)=>{if(qt(e)||qt(t))return 0;const[n,a]=Yo(Ht(e),Ht(t));return n>a?1:n<a?-1:0},Vt=(e,t)=>{for(let n=0;n<Math.max(e.length,t.length);n++){const a=Zo(e[n]||"0",t[n]||"0");if(a!==0)return a}return 0},Xo=(e,t)=>{const n=Dt(e),a=Dt(t),o=n.pop(),s=a.pop(),r=Vt(n,a);return r!==0?r:o&&s?Vt(o.split("."),s.split(".")):o||s?o?-1:1:0},wn=(e,t,n)=>{Qo(n);const a=Xo(e,t);return Sn[n].includes(a)},Sn={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},Ft=Object.keys(Sn),Qo=e=>{if(typeof e!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof e}`);if(Ft.indexOf(e)===-1)throw new Error(`Invalid operator, expected one of ${Ft.join("|")}`)};function Wt(){let e;const t=new Promise(n=>e=n);return Object.assign(t,{resolve:e})}function er(e,t){return e?e.modules.some(n=>n.className===t):null}const N=Yt("endpoint",()=>{const e=Me("endpoint",""),t=Me("accessToken",""),n=Me("authToken","",void 0,{writeDefaults:!1}),a=A(n.value),o=A(),s=A(Wt()),r=()=>{const h=Wt();return s.value.resolve(h),s.value=h,h},c=A(),d=A("checking"),g=A(null),m=A(null),p=async(h,k=!1)=>{if(c.value&&wn(c.value.version.version,"4.0.0","<"))return;h&&(a.value=h),h&&k&&(n.value=h);const S=d.value==="checking";S||r();try{if(h)await Go(h);else throw new be;S||(s.value.resolve(),g.value=null,d.value="pass")}catch(y){throw S||(g.value=y,be.is(y)&&(d.value="needLogin")),y}},f=async h=>{d.value="checking",e.value=h,r();try{c.value=await Ko(h);try{await p(a.value)}catch(k){throw be.is(k)&&(d.value="needLogin"),k}return s.value.resolve(),g.value=null,d.value="pass",!0}catch(k){return g.value=k,d.value==="checking"&&(d.value="fail"),!1}},v=async h=>{t.value=h;try{const k=await Wo();o.value={tagName:k.tag_name,url:k.html_url}}catch(k){m.value=k,console.error("Failed to get version:",k)}};return f(e.value),setTimeout(async()=>v(t.value),3e3),{endpoint:de(e),serverAvailable:de(s),serverManifest:de(c),loading:L(()=>d.value==="checking"),status:de(d),error:de(g),checkUpgradeError:de(m),accessToken:de(t),latestVersion:de(o),setEndpoint:f,setAccessToken:v,authToken:de(a),setAuthToken:p,assertResponseLogin:h=>{if(h.status===403)throw p(null),new be}}});async function tr(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,`api/downloaders/${e}/status`),location.href);return fetch(n,{headers:q()}).then(a=>(t.assertResponseLogin(a),a.json()))}async function nr(){const e=N();await e.serverAvailable;const t=new URL(D(e.endpoint,"/api/statistic/counter"),location.href);return fetch(t,{headers:q()}).then(n=>(e.assertResponseLogin(n),n.json()))}async function ar(){const e=N();await e.serverAvailable;const t=new URL(D(e.endpoint,"/api/downloaders"),location.href);return fetch(t,{headers:q()}).then(n=>(e.assertResponseLogin(n),n.json()))}async function or(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,`/api/downloaders/${e}/torrents`),location.href);return fetch(n,{headers:q()}).then(a=>(t.assertResponseLogin(a),a.json()))}function Te(e,t=2){if(e===0)return"0 Bytes";const n=1024,a=t<0?0:t,o=["Bytes","KB","MB","GB","TB","PB","EB"],s=Math.floor(Math.log(e)/Math.log(n));return s>=o.length?"Too large":parseFloat((e/Math.pow(n,s)).toFixed(a))+" "+o[s]}const rr=P({__name:"torrentListModal",setup(e,{expose:t}){const{t:n}=x(),a=A(!1),o=A("");t({showModal:m=>{o.value=m,a.value=!0,d(m)}});const s=()=>{a.value=!1,o.value=""},{data:r,loading:c,run:d}=me(or,{manual:!0}),g=[{title:()=>n("page.dashboard.torrentList.column.name"),slotName:"name"},{title:()=>n("page.dashboard.torrentList.column.size"),slotName:"size"},{title:()=>n("page.dashboard.torrentList.column.hash"),slotName:"hash"},{title:()=>n("page.dashboard.torrentList.column.progress"),slotName:"progress"}];return(m,p)=>{const f=J,v=en,h=H,k=Ce,S=je;return w(),I(S,{"hide-cancel":"",closable:"",visible:a.value,"onUpdate:visible":p[0]||(p[0]=y=>a.value=y),onOk:s,draggable:"",width:"auto"},{title:l(()=>[b(_(u(n)("page.dashboard.torrentList.title")),1)]),default:l(()=>[i(k,{columns:g,data:u(r),loading:u(c),pagination:{pageSize:5,baseSize:4,bufferSize:1}},{name:l(({record:y})=>[i(f,{bold:"",style:{"margin-bottom":"0"},ellipsis:{showTooltip:!0}},{default:l(()=>[b(_(y.name),1)]),_:2},1024)]),size:l(({record:y})=>[i(f,null,{default:l(()=>[b(_(u(Te)(y.size)),1)]),_:2},1024)]),hash:l(({record:y})=>[i(f,{copyable:"",code:""},{default:l(()=>[b(_(y.hash),1)]),_:2},1024)]),progress:l(({record:y})=>[i(h,null,{default:l(()=>[i(v,{percent:y.progress,size:"mini"},null,8,["percent"]),i(f,null,{default:l(()=>[b(_((y.progress*100).toFixed(2)+"%"),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["data","loading"])]),_:1},8,["visible"])}}}),sr=P({name:"IconArrowDown",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-arrow-down`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),lr=["stroke-width","stroke-linecap","stroke-linejoin"],ir=j("path",{d:"m11.27 27.728 12.727 12.728 12.728-12.728M24 5v34.295"},null,-1),cr=[ir];function ur(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},cr,14,lr)}var Ze=ee(sr,[["render",ur]]);const $n=Object.assign(Ze,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+Ze.name,Ze)}}),dr=P({name:"IconArrowUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-arrow-up`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),pr=["stroke-width","stroke-linecap","stroke-linejoin"],mr=j("path",{d:"M11.27 20.272 23.997 7.544l12.728 12.728M24 43V8.705"},null,-1),gr=[mr];function fr(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},gr,14,pr)}var Xe=ee(dr,[["render",fr]]);const Tn=Object.assign(Xe,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+Xe.name,Xe)}}),br=P({name:"IconInfoCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-info-circle`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),hr=["stroke-width","stroke-linecap","stroke-linejoin"],_r=j("path",{d:"M24 20v14m0-16v-4m18 10c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),vr=[_r];function yr(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},vr,14,hr)}var Qe=ee(br,[["render",yr]]);const At=Object.assign(Qe,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+Qe.name,Qe)}}),kr=P({name:"IconPlusCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-plus-circle`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),wr=["stroke-width","stroke-linecap","stroke-linejoin"],Sr=j("path",{d:"M32 24h-8m-8 0h8m0 0v8m0-8v-8m18 8c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),$r=[Sr];function Tr(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},$r,14,wr)}var et=ee(kr,[["render",Tr]]);const Lr=Object.assign(et,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+et.name,et)}}),Cr=P({name:"IconStop",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-stop`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),Ir=["stroke-width","stroke-linecap","stroke-linejoin"],Ar=j("path",{d:"M36.728 36.728c7.03-7.03 7.03-18.427 0-25.456-7.03-7.03-18.427-7.03-25.456 0m25.456 25.456c-7.03 7.03-18.427 7.03-25.456 0-7.03-7.03-7.03-18.427 0-25.456m25.456 25.456L11.272 11.272"},null,-1),Pr=[Ar];function Nr(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Pr,14,Ir)}var tt=ee(Cr,[["render",Nr]]);const Mr=Object.assign(tt,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+tt.name,tt)}}),Ur=P({name:"IconHistory",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-history`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),zr=["stroke-width","stroke-linecap","stroke-linejoin"],jr=j("path",{d:"M6 24c0-9.941 8.059-18 18-18s18 8.059 18 18-8.059 18-18 18c-6.26 0-11.775-3.197-15-8.047M6 24l-.5-.757h1L6 24Zm26 2h-9v-9"},null,-1),Er=[jr];function Rr(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Er,14,zr)}var nt=ee(Ur,[["render",Rr]]);const xr=Object.assign(nt,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+nt.name,nt)}}),Or=P({name:"IconRefresh",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-refresh`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),Br=["stroke-width","stroke-linecap","stroke-linejoin"],Dr=j("path",{d:"M38.837 18C36.463 12.136 30.715 8 24 8 15.163 8 8 15.163 8 24s7.163 16 16 16c7.455 0 13.72-5.1 15.496-12M40 8v10H30"},null,-1),qr=[Dr];function Hr(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},qr,14,Br)}var at=ee(Or,[["render",Hr]]);const Vr=Object.assign(at,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+at.name,at)}}),Fr=P({name:"IconSettings",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-settings`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),Wr=["stroke-width","stroke-linecap","stroke-linejoin"],Kr=j("path",{d:"M18.797 6.732A1 1 0 0 1 19.76 6h8.48a1 1 0 0 1 .964.732l1.285 4.628a1 1 0 0 0 1.213.7l4.651-1.2a1 1 0 0 1 1.116.468l4.24 7.344a1 1 0 0 1-.153 1.2L38.193 23.3a1 1 0 0 0 0 1.402l3.364 3.427a1 1 0 0 1 .153 1.2l-4.24 7.344a1 1 0 0 1-1.116.468l-4.65-1.2a1 1 0 0 0-1.214.7l-1.285 4.628a1 1 0 0 1-.964.732h-8.48a1 1 0 0 1-.963-.732L17.51 36.64a1 1 0 0 0-1.213-.7l-4.65 1.2a1 1 0 0 1-1.116-.468l-4.24-7.344a1 1 0 0 1 .153-1.2L9.809 24.7a1 1 0 0 0 0-1.402l-3.364-3.427a1 1 0 0 1-.153-1.2l4.24-7.344a1 1 0 0 1 1.116-.468l4.65 1.2a1 1 0 0 0 1.213-.7l1.286-4.628Z"},null,-1),Gr=j("path",{d:"M30 24a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"},null,-1),Jr=[Kr,Gr];function Yr(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Jr,14,Wr)}var ot=ee(Fr,[["render",Yr]]);const Ln=Object.assign(ot,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+ot.name,ot)}}),Zr=P({name:"IconMoonFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-moon-fill`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),Xr=["stroke-width","stroke-linecap","stroke-linejoin"],Qr=j("path",{d:"M42.108 29.769c.124-.387-.258-.736-.645-.613A17.99 17.99 0 0 1 36 30c-9.941 0-18-8.059-18-18 0-1.904.296-3.74.844-5.463.123-.387-.226-.768-.613-.645C10.558 8.334 5 15.518 5 24c0 10.493 8.507 19 19 19 8.482 0 15.666-5.558 18.108-13.231Z",fill:"currentColor",stroke:"none"},null,-1),es=[Qr];function ts(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},es,14,Xr)}var rt=ee(Zr,[["render",ts]]);const ns=Object.assign(rt,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+rt.name,rt)}}),as=P({name:"IconSunFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-sun-fill`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),os=["stroke-width","stroke-linecap","stroke-linejoin"],rs=j("circle",{cx:"24",cy:"24",r:"9",fill:"currentColor",stroke:"none"},null,-1),ss=j("path",{d:"M21 5.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5ZM21 37.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5ZM42.5 21a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5h5ZM10.5 21a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5h5ZM39.203 34.96a.5.5 0 0 1 0 .707l-3.536 3.536a.5.5 0 0 1-.707 0l-3.535-3.536a.5.5 0 0 1 0-.707l3.535-3.535a.5.5 0 0 1 .707 0l3.536 3.535ZM16.575 12.333a.5.5 0 0 1 0 .707l-3.535 3.535a.5.5 0 0 1-.707 0L8.797 13.04a.5.5 0 0 1 0-.707l3.536-3.536a.5.5 0 0 1 .707 0l3.535 3.536ZM13.04 39.203a.5.5 0 0 1-.707 0l-3.536-3.536a.5.5 0 0 1 0-.707l3.536-3.535a.5.5 0 0 1 .707 0l3.536 3.535a.5.5 0 0 1 0 .707l-3.536 3.536ZM35.668 16.575a.5.5 0 0 1-.708 0l-3.535-3.535a.5.5 0 0 1 0-.707l3.535-3.536a.5.5 0 0 1 .708 0l3.535 3.536a.5.5 0 0 1 0 .707l-3.535 3.535Z",fill:"currentColor",stroke:"none"},null,-1),ls=[rs,ss];function is(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},ls,14,os)}var st=ee(as,[["render",is]]);const cs=Object.assign(st,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+st.name,st)}}),us=P({name:"IconLanguage",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-language`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),ds=["stroke-width","stroke-linecap","stroke-linejoin"],ps=j("path",{d:"m42 43-2.385-6M26 43l2.384-6m11.231 0-.795-2-4.18-10h-1.28l-4.181 10-.795 2m11.231 0h-11.23M17 5l1 5M5 11h26M11 11s1.889 7.826 6.611 12.174C22.333 27.522 30 31 30 31"},null,-1),ms=j("path",{d:"M25 11s-1.889 7.826-6.611 12.174C13.667 27.522 6 31 6 31"},null,-1),gs=[ps,ms];function fs(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},gs,14,ds)}var lt=ee(us,[["render",fs]]);const bs=Object.assign(lt,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+lt.name,lt)}}),hs=P({name:"IconLocation",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-location`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),_s=["stroke-width","stroke-linecap","stroke-linejoin"],vs=j("circle",{cx:"24",cy:"19",r:"5"},null,-1),ys=j("path",{d:"M39 20.405C39 28.914 24 43 24 43S9 28.914 9 20.405C9 11.897 15.716 5 24 5c8.284 0 15 6.897 15 15.405Z"},null,-1),ks=[vs,ys];function ws(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},ks,14,_s)}var it=ee(hs,[["render",ws]]);const Ss=Object.assign(it,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+it.name,it)}}),$s=P({name:"IconLock",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=te("icon"),a=L(()=>[n,`${n}-lock`,{[`${n}-spin`]:e.spin}]),o=L(()=>{const r={};return e.size&&(r.fontSize=ne(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:a,innerStyle:o,onClick:r=>{t("click",r)}}}}),Ts=["stroke-width","stroke-linecap","stroke-linejoin"],Ls=j("rect",{x:"7",y:"21",width:"34",height:"20",rx:"1"},null,-1),Cs=j("path",{d:"M15 21v-6a9 9 0 1 1 18 0v6M24 35v-8"},null,-1),Is=[Ls,Cs];function As(e,t,n,a,o,s){return w(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:Q(e.cls),style:G(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Is,14,Ts)}var ct=ee($s,[["render",As]]);const Ps=Object.assign(ct,{install:(e,t)=>{var n;const a=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(a+ct.name,ct)}});var re=(e=>(e.HEALTHY="HEALTHY",e.ERROR="ERROR",e.UNKNOWN="UNKNOWN",e))(re||{});const fe=Yt("autoUpdate",()=>{const e=A(new Date),t=Me("autoUpdate.enable",!0),n=Me("autoUpdate.interval",3e3),a=L(()=>t.value?n.value:-1);function o(){e.value=new Date}return{lastUpdate:e,autoUpdate:t,interval:n,pollingInterval:a,renewLastUpdate:o}}),Ns=P({__name:"clientStatusCard",props:{downloader:{}},emits:["torrent-view-click"],setup(e,{emit:t}){const{t:n}=x(),a={[re.HEALTHY]:["success","page.dashboard.clientStatus.card.status.normal"],[re.ERROR]:["warning","page.dashboard.clientStatus.card.status.error"],[re.UNKNOWN]:["danger","page.dashboard.clientStatus.card.status.unknown"]},o=e,s=t,r=L(()=>o.downloader),c=fe(),d=N(),g=p=>a[(p==null?void 0:p.lastStatus)??re.UNKNOWN]??a[re.UNKNOWN],{data:m}=me(tr,{pollingInterval:L(()=>c.pollingInterval),onSuccess:c.renewLastUpdate,cacheKey:()=>`${d.endpoint}-clientStatus-${r.value.name}`,defaultParams:[r.value.name],refreshDeps:[()=>r.value.name],refreshDepsAction:()=>{c.renewLastUpdate()}});return(p,f)=>{const v=Ie,h=tn,k=H,S=nn,y=Ee,C=At,$=Re,T=vt,M=Xn,U=Qn,V=ea,F=J,K=ta,Y=xe,Z=yt,ae=kt;return w(),I(ae,{hoverable:"",style:{height:"100%"},"header-style":{height:"auto"}},{title:l(()=>[i(v,{style:{margin:"0px"},ellipsis:{rows:2,showTooltip:!0}},{default:l(()=>[b(_(r.value.name),1)]),_:1})]),default:l(()=>[u(m)?X("",!0):(w(),I(S,{key:0,animation:!0},{default:l(()=>[i(k,{direction:"vertical",style:{width:"100%"},size:0},{default:l(()=>[i(h,{rows:4,"line-height":22,"line-spacing":14,widths:["60%","70%","50%","60%"]})]),_:1})]),_:1})),u(m)?(w(),I(Z,{key:1,column:1,layout:"inline-horizontal",class:"space","label-style":{paddingRight:"10px"}},{default:l(()=>[i(T,{label:u(n)("page.dashboard.clientStatus.card.type")},{default:l(()=>[i(k,null,{default:l(()=>[i(y,{bordered:""},{default:l(()=>[b(_(r.value.type),1)]),_:1}),i($,{content:r.value.endpoint},{default:l(()=>[i(C,{size:"large"})]),_:1},8,["content"])]),_:1})]),_:1},8,["label"]),i(T,{label:u(n)("page.dashboard.clientStatus.card.status")},{default:l(()=>[i(F,{type:g(u(m))[0]},{default:l(()=>[u(m).lastStatus==u(re).HEALTHY?(w(),I(M,{key:0})):X("",!0),u(m).lastStatus==u(re).ERROR?(w(),I(U,{key:1})):X("",!0),u(m).lastStatus==u(re).UNKNOWN?(w(),I(V,{key:2})):X("",!0),b(" "+_(u(n)(g(u(m))[1])),1)]),_:1},8,["type"])]),_:1},8,["label"]),u(m).lastStatus==u(re).HEALTHY?(w(),I(T,{key:0,label:u(n)("page.dashboard.clientStatus.card.status.torrentNumber")},{default:l(()=>[i(k,null,{default:l(()=>[i(y,{color:"arcoblue",bordered:""},{default:l(()=>[b(_(u(m).activeTorrents),1)]),_:1}),i($,{content:u(n)("page.dashboard.torrentList.tips")},{default:l(()=>[i(Y,{onClick:f[0]||(f[0]=()=>s("torrent-view-click",r.value.name)),shape:"circle",type:"text",size:"mini"},{icon:l(()=>[i(K,{size:"large",style:{color:"var(--color-text-1)"}})]),_:1})]),_:1},8,["content"])]),_:1})]),_:1},8,["label"])):X("",!0),u(m).lastStatus==u(re).HEALTHY?(w(),I(T,{key:1,label:u(n)("page.dashboard.clientStatus.card.status.peerNumber")},{default:l(()=>[i(y,{color:"arcoblue",bordered:""},{default:l(()=>[b(_(u(m).activePeers),1)]),_:1})]),_:1},8,["label"])):X("",!0)]),_:1})):X("",!0)]),_:1})}}}),se=(e,t)=>{const n=e.__vccOpts||e;for(const[a,o]of t)n[a]=o;return n},Ms=se(Ns,[["__scopeId","data-v-ce71eb55"]]),Us=P({__name:"clientStatus",setup(e){const{t}=x(),n=N(),a=fe(),{data:o,refresh:s,loading:r}=me(ar,{pollingInterval:L(()=>a.pollingInterval),cacheKey:()=>`${n.endpoint}-downloader`});ue(()=>n.endpoint,s);const c=A();return(d,g)=>{const m=Ie,p=tn,f=H,v=nn,h=kt,k=wt,S=St;return w(),E(he,null,[i(m,{heading:3},{default:l(()=>[b(_(u(t)("page.dashboard.clientStatus.title")),1)]),_:1}),i(S,{justify:"start",align:"stretch",wrap:!0,gutter:[{xs:8,sm:8,md:8,lg:24,xl:32},{xs:8,sm:8,md:8,lg:24,xl:32}]},{default:l(()=>{var y;return[!u(o)||((y=u(o))==null?void 0:y.length)===0||u(r)?(w(),I(k,{key:0,xs:24,sm:12,md:8,lg:6},{default:l(()=>[i(h,{hoverable:"","header-style":{height:"auto"}},{title:l(()=>[i(v,{animation:!0},{default:l(()=>[i(f,{direction:"vertical",style:{width:"100%"},size:0},{default:l(()=>[i(p,{"line-height":44,"line-spacing":0})]),_:1})]),_:1})]),default:l(()=>[i(v,{animation:!0},{default:l(()=>[i(f,{direction:"vertical",style:{width:"100%"},size:0},{default:l(()=>[i(p,{rows:4,"line-height":22,"line-spacing":14,widths:["60%","70%","50%","60%"]})]),_:1})]),_:1})]),_:1})]),_:1})):(w(!0),E(he,{key:1},ht(u(o),C=>(w(),I(k,{xs:24,sm:12,md:8,lg:6,key:C.name},{default:l(()=>[i(Ms,{downloader:C,onTorrentViewClick:()=>{var $;return($=c.value)==null?void 0:$.showModal(C.name)}},null,8,["downloader","onTorrentViewClick"])]),_:2},1024))),128))]}),_:1}),i(rr,{ref_key:"torrentList",ref:c},null,512)],64)}}}),zs=P({__name:"statisticInfo",setup(e){const{t}=x(),n=fe(),a=N(),o=A({checkCounter:0,peerBanCounter:0,peerUnbanCounter:0,banlistCounter:0}),s=A(o.value),{refresh:r}=me(nr,{pollingInterval:L(()=>n.pollingInterval),onSuccess:c=>{const d=s.value;s.value=c,Mn.isEqual(c,d)||(o.value=d),n.renewLastUpdate()},cacheKey:()=>`${a.endpoint}-statistic`});return ue(()=>a.endpoint,r),(c,d)=>{const g=J,m=na,p=aa,f=oa,v=kt,h=H;return w(),I(h,{direction:"vertical",fill:""},{default:l(()=>[i(v,{title:u(t)("page.dashboard.statics.currentStatus")},{default:l(()=>[i(f,{cols:24,"row-gap":16,class:"panel"},{default:l(()=>[i(p,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:l(()=>{var k;return[i(m,{title:u(t)("page.dashboard.statics.checked"),value:(k=s.value)==null?void 0:k.checkCounter,"value-from":o.value.checkCounter,animation:"","show-group-separator":""},{suffix:l(()=>[i(g,null,{default:l(()=>[b(" "+_(u(t)("page.dashboard.statics.times")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1}),i(p,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:l(()=>{var k;return[i(m,{title:u(t)("page.dashboard.statics.banPeer"),value:(k=s.value)==null?void 0:k.peerBanCounter,"value-from":o.value.peerBanCounter,animation:"","show-group-separator":""},{suffix:l(()=>[i(g,null,{default:l(()=>[b(" "+_(u(t)("page.dashboard.statics.times")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1}),i(p,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:l(()=>{var k;return[i(m,{title:u(t)("page.dashboard.statics.unbanPeer"),value:(k=s.value)==null?void 0:k.peerUnbanCounter,"value-from":o.value.peerUnbanCounter,animation:"","show-group-separator":""},{suffix:l(()=>[i(g,null,{default:l(()=>[b(" "+_(u(t)("page.dashboard.statics.times")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1}),i(p,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:l(()=>{var k;return[i(m,{title:u(t)("page.dashboard.statics.currentBan"),value:(k=s.value)==null?void 0:k.banlistCounter,"value-from":o.value.banlistCounter,animation:"","show-group-separator":""},{suffix:l(()=>[i(g,null,{default:l(()=>[b(" "+_(u(t)("page.dashboard.statics.number")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1})]),_:1})]),_:1},8,["title"])]),_:1})}}}),js=j("br",null,null,-1),Es=P({__name:"index",setup(e){return(t,n)=>{const a=J,o=H;return w(),I(o,{direction:"vertical",fill:""},{default:l(()=>[i(a,{style:{"font-size":"1.2em"}},{default:l(()=>[b(_(t.$t("page.dashboard.description")),1)]),_:1}),i(Us),js,i(zs)]),_:1})}}});async function ut(e,t){const n=N();await n.serverAvailable;const a=new URL(D(n.endpoint,"api/bans"),location.href);return a.searchParams.set("limit",String(e)),t&&a.searchParams.set("lastBanTime",String(t)),fetch(a,{headers:q()}).then(o=>(n.assertResponseLogin(o),o.json()))}const Rs=e=>{let t=0,n,a;if(e.length===0)return t;for(n=0;n<e.length;n++)a=e.charCodeAt(n),t=(t<<5)-t+a,t|=0;return t},Ge=e=>{const t=Math.abs(Rs(e))%Kt.length;return Kt[t]},Kt=["red","orangered","orange","gold","lime","green","cyan","blue","arcoblue","purple","pinkpurple","magenta"],xs=["title"],Os=P({__name:"countryFlag",props:{iso:{},title:{},mode:{}},setup(e){const{locale:t}=x(),n=e,a=L(()=>{let o="",s=n.iso.toLowerCase();return t.value==="zh-CN"&&s==="tw"&&(s="cn"),o="flag-icon-"+s,n.mode&&(o+=" flag-icon-"+n.mode),o});return(o,s)=>n.iso!==""?(w(),E("span",{key:0,class:Q([a.value,"flag-icon"]),title:n.title||n.iso},null,10,xs)):X("",!0)}}),Bs=P({__name:"banListItem",props:{item:{}},setup(e){const{t,d:n}=x(),a=$t(A({md:1}),0);return(o,s)=>{const r=J,c=H,d=vt,g=Tn,m=$n,p=Ss,f=Tt,v=Ee,h=At,k=Re,S=yt;return w(),I(S,{column:{xs:3,md:6,xl:12},size:"medium",layout:["inline-vertical","horizontal"][u(a)]},{title:l(()=>[i(c,{wrap:""},{default:l(()=>[i(r,{bold:"",copyable:""},{default:l(()=>[b(_(o.item.banMetadata.peer.address.ip)+":"+_(o.item.banMetadata.peer.address.port),1)]),_:1}),i(r,{code:""},{default:l(()=>[b(_(o.item.banMetadata.peer.clientName?o.item.banMetadata.peer.clientName:u(t)("page.banlist.banlist.listItem.empty")),1)]),_:1})]),_:1})]),default:l(()=>[i(d,{label:u(t)("page.banlist.banlist.listItem.banTime"),span:4},{default:l(()=>[b(_(u(n)(o.item.banMetadata.banAt,"long")),1)]),_:1},8,["label"]),i(d,{label:u(t)("page.banlist.banlist.listItem.expireTime"),span:4},{default:l(()=>[b(_(u(n)(o.item.banMetadata.unbanAt,"long")),1)]),_:1},8,["label"]),i(d,{label:u(t)("page.banlist.banlist.listItem.snapshot"),span:4},{default:l(()=>[i(g,{class:"green"}),b(" "+_(u(Te)(o.item.banMetadata.peer.uploaded))+" ",1),i(m,{class:"red"}),b(" "+_(u(Te)(o.item.banMetadata.peer.downloaded))+" - "+_((o.item.banMetadata.peer.progress*100).toFixed(2))+"% ",1)]),_:1},8,["label"]),i(d,{label:u(t)("page.banlist.banlist.listItem.location"),span:12},{default:l(()=>[i(r,{style:{"margin-bottom":"0"},ellipsis:{showTooltip:!0}},{default:l(()=>[b(_(o.item.banMetadata.torrent.name),1)]),_:1})]),_:1},8,["label"]),i(d,{label:u(t)("page.banlist.banlist.listItem.reason"),span:12},{default:l(()=>[i(r,{style:{"margin-bottom":"0"}},{default:l(()=>[b(_(o.item.banMetadata.description),1)]),_:1})]),_:1},8,["label"]),o.item.banMetadata.geo?(w(),I(d,{key:0,label:u(t)("page.banlist.banlist.listItem.geo"),span:4},{default:l(()=>{var y,C,$,T,M;return[i(Os,{iso:(y=o.item.banMetadata.geo)==null?void 0:y.iso,mode:"squared"},null,8,["iso"]),b(" "+_(`${(C=o.item.banMetadata.geo)==null?void 0:C.countryRegion} ${(($=o.item.banMetadata.geo)==null?void 0:$.city)??""}`)+" ",1),i(f,{href:`https://uri.amap.com/marker?position=${(T=o.item.banMetadata.geo)==null?void 0:T.longitude},${(M=o.item.banMetadata.geo)==null?void 0:M.latitude}`,hoverable:!1},{default:l(()=>[i(p)]),_:1},8,["href"])]}),_:1},8,["label"])):X("",!0),o.item.banMetadata.asn?(w(),I(d,{key:1,label:u(t)("page.banlist.banlist.listItem.asn"),span:4},{default:l(()=>[i(c,null,{default:l(()=>{var y,C;return[i(r,null,{default:l(()=>{var $;return[b(_(($=o.item.banMetadata.asn)==null?void 0:$.asOrganization),1)]}),_:1}),i(v,{color:u(Ge)((y=o.item.banMetadata.asn)==null?void 0:y.asn.toString())},{default:l(()=>{var $;return[b(_(($=o.item.banMetadata.asn)==null?void 0:$.asn),1)]}),_:1},8,["color"]),i(k,{content:u(t)("page.banlist.banlist.listItem.asn.subnet")+((C=o.item.banMetadata.asn)==null?void 0:C.asNetwork)},{default:l(()=>{var $;return[i(f,{href:`https://2ip.io/analytics/asn-list/?asnId=${($=o.item.banMetadata.asn)==null?void 0:$.asn}`,hoverable:!1},{default:l(()=>[i(h)]),_:1},8,["href"])]}),_:1},8,["content"])]}),_:1})]),_:1},8,["label"])):X("",!0),o.item.banMetadata.reverseLookup!=="N/A"?(w(),I(d,{key:2,label:u(t)("page.banlist.banlist.listItem.reserveDNSLookup"),span:4},{default:l(()=>[b(_(o.item.banMetadata.reverseLookup),1)]),_:1},8,["label"])):X("",!0)]),_:1},8,["layout"])}}}),Ds=se(Bs,[["__scopeId","data-v-8b07a553"]]),qs=e=>(zn("data-v-bcc8aabb"),e=e(),jn(),e),Hs=qs(()=>j("br",null,null,-1)),Vs={key:1,style:{position:"absolute",transform:"translateY(-50%)"}},_e=5,Fs=P({__name:"banList",setup(e){const{height:t}=Un(),n=A(),a=fe(),o=N(),s=A(!1),r=A(5),c=A(!1),{t:d}=x();let g=!0;async function m(){var $;if(g||!p.value)return g=!1,ut(_e);if(p.value.length>r.value-_e){const T=[];let M=!1;for(;T.length<r.value&&!M;){const U=await ut(_e,($=T[T.length-1])==null?void 0:$.banMetadata.banAt);for(const V of U)if(V.banMetadata.randomId!==p.value[0].banMetadata.randomId)T.push(V);else{M=!0;break}}return M?(r.value=p.value.length+T.length,T.concat(p.value)):T}return p.value}const{data:p,refresh:f,run:v}=me(m,{pollingInterval:L(()=>a.pollingInterval),onSuccess:a.renewLastUpdate,manual:!0}),h=$=>{var T,M;if($){const U=(T=p.value)==null?void 0:T.map(V=>V.address).findIndex(V=>V.includes($));U!==-1&&((M=n.value)==null||M.scrollIntoView({index:U,align:"auto"}))}},k=async()=>{var $;if(p.value){if(r.value=p.value.length+_e,c.value=!0,s.value=!1,p.value.length<=r.value){const T=[];for(;T.length+p.value.length<r.value&&!s.value;){const M=await ut(_e,($=T[T.length-1]||p.value[p.value.length-1])==null?void 0:$.banMetadata.banAt);M.length<_e&&(s.value=!0),T.push(...M)}p.value=p.value.concat(T)}setTimeout(()=>{c.value=!1},s.value?1e3:0)}};ue(()=>o.endpoint,()=>{r.value=_e,p.value=void 0,f()}),Zt(v);const S=L(()=>p.value??[]),y=$t(A({xs:1500,md:1e3,xl:800}),800),C=L(()=>Math.min(y.value,t.value-200));return($,T)=>{const M=Ie,U=J,V=an,F=H,K=ra,Y=on,Z=sa,ae=la;return w(),I(F,{direction:"vertical",fill:""},{default:l(()=>[i(M,{heading:3},{default:l(()=>[b(_(u(d)("page.banlist.banlist")),1)]),_:1}),Hs,i(F,{class:"list-header",wrap:""},{default:l(()=>[i(U,null,{default:l(()=>[b(_(u(d)("page.banlist.banlist.description")),1)]),_:1}),i(V,{style:{width:"250px"},placeholder:u(d)("page.banlist.banlist.searchPlaceHolder"),onSearch:h,"allow-clear":"","search-button":""},null,8,["placeholder"])]),_:1}),i(ae,{virtualListProps:{height:C.value},ref_key:"banlist",ref:n,onReachBottom:k,scrollbar:!1,data:S.value},{item:l(({item:z,index:oe})=>[i(K,{style:G({marginBottom:oe===S.value.length-1&&c.value?"50px":void 0})},{default:l(()=>[i(Ds,{item:z},null,8,["item"])]),_:2},1032,["style"])]),"scroll-loading":l(()=>[S.value.length===0?(w(),I(Y,{key:0,style:G({height:`${C.value}px`})},null,8,["style"])):X("",!0),c.value?(w(),E("div",Vs,[s.value?(w(),I(U,{key:0},{default:l(()=>[b(_(u(d)("page.banlist.banlist.bottomReached")),1)]),_:1})):(w(),I(Z,{key:1}))])):X("",!0)]),_:1},8,["virtualListProps","data"])]),_:1})}}}),Ws=se(Fs,[["__scopeId","data-v-bcc8aabb"]]),Ks=P({__name:"index",setup(e){return(t,n)=>{const a=H;return w(),I(a,{direction:"vertical",fill:""},{default:l(()=>[i(Ws)]),_:1})}}});async function Gs(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,"api/bans/logs"),location.href);return n.searchParams.set("pageIndex",String(e.pageIndex-1)),e.pageSize&&n.searchParams.set("pageSize",String(e.pageSize)),fetch(n,{headers:q()}).then(a=>a.json()).then(a=>(t.assertResponseLogin(a),{...a,pageIndex:a.pageIndex+1}))}const Js=P({__name:"banlogTable",setup(e){const t=A(!0),n=fe(),a=N(),{t:o,d:s}=x(),{data:r,total:c,current:d,loading:g,pageSize:m,changeCurrent:p,changePageSize:f,refresh:v}=Xt(Gs,{defaultParams:[{pageIndex:1,pageSize:10}],pagination:{currentKey:"pageIndex",pageSizeKey:"pageSize",totalKey:"total"},pollingInterval:L(()=>n.pollingInterval),cacheKey:y=>`${a.endpoint}-banlogs-${(y==null?void 0:y[0].pageIndex)||1}-${(y==null?void 0:y[0].pageSize)||10}`,onSuccess:n.renewLastUpdate,onAfter:()=>{t.value=!1}});ue([m,d],()=>{t.value=!0}),ue(()=>a.endpoint,v);const h=L(()=>t.value||g.value||!S.value),k=[{title:()=>o("page.banlog.banlogTable.column.banTime")+"/"+o("page.banlog.banlogTable.column.unbanTime"),slotName:"banAt",width:210},{title:()=>o("page.banlog.banlogTable.column.peerAddress"),slotName:"peerAddress",width:230},{title:()=>o("page.banlog.banlogTable.column.peerId"),slotName:"peerId",width:120},{title:()=>o("page.banlog.banlogTable.column.trafficSnapshot"),slotName:"peerStatus",width:150},{title:()=>o("page.banlog.banlogTable.column.torrentName"),dataIndex:"torrentName",ellipsis:!0,tooltip:!0},{title:()=>o("page.banlog.banlogTable.column.torrentSize"),slotName:"torrentSize",width:120},{title:()=>o("page.banlog.banlogTable.column.description"),dataIndex:"description",ellipsis:!0,tooltip:!0}],S=L(()=>{var y;return(y=r.value)==null?void 0:y.results});return(y,C)=>{const $=Mr,T=J,M=rn,U=H,V=Tn,F=$n,K=en,Y=Re,Z=At,ae=Ce;return w(),I(ae,{stripe:!0,columns:k,data:S.value,loading:h.value,pagination:{total:u(c),current:u(d),pageSize:u(m),showPageSize:!0,baseSize:4,bufferSize:1},"column-resizable":"",size:"medium",onPageChange:u(p),onPageSizeChange:u(f),class:"banlog-table"},{banAt:l(({record:z})=>[i(U,{fill:"",direction:"vertical"},{default:l(()=>[i(T,null,{default:l(()=>[i($),b(" "+_(u(s)(z.banAt,"long")),1)]),_:2},1024),i(T,null,{default:l(()=>[i(M),b(" "+_(z.unbanAt?u(s)(z.unbanAt,"long"):u(o)("page.banlog.banlogTable.notUnbanned")),1)]),_:2},1024)]),_:2},1024)]),peerAddress:l(({record:z})=>[i(T,{copyable:"",code:""},{default:l(()=>[b(_(z.peerIp)+":"+_(z.peerPort),1)]),_:2},1024)]),peerStatus:l(({record:z})=>[i(U,{fill:"",style:{"justify-content":"space-between"}},{default:l(()=>[i(U,{fill:"",direction:"vertical"},{default:l(()=>[i(T,null,{default:l(()=>[i(V,{class:"green"}),b(" "+_(u(Te)(z.peerUploaded)),1)]),_:2},1024),i(T,null,{default:l(()=>[i(F,{class:"red"}),b(" "+_(u(Te)(z.peerDownloaded)),1)]),_:2},1024)]),_:2},1024),i(Y,{content:(z.peerProgress*100).toFixed(2)+"%"},{default:l(()=>[i(K,{percent:z.peerProgress,size:"mini"},null,8,["percent"])]),_:2},1032,["content"])]),_:2},1024)]),peerId:l(({record:z})=>[j("p",null,[b(_(z.peerId?z.peerId:u(o)("page.banlist.banlist.listItem.empty"))+" ",1),i(Y,{content:z.peerClientName?z.peerClientName:u(o)("page.banlist.banlist.listItem.empty")},{default:l(()=>[i(Z)]),_:2},1032,["content"])])]),torrentSize:l(({record:z})=>[i(Y,{content:`Hash: ${z.torrentInfoHash}`},{default:l(()=>[j("p",null,_(u(Te)(z.torrentSize)),1)]),_:2},1032,["content"])]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])}}}),Ys=se(Js,[["__scopeId","data-v-4d465df4"]]),Zs=P({__name:"index",setup(e){return(t,n)=>{const a=J,o=H;return w(),I(o,{direction:"vertical",fill:""},{default:l(()=>[i(a,{style:{"font-size":"1.2em"}},{default:l(()=>[b(_(t.$t("page.banlog.description")),1)]),_:1}),i(Ys)]),_:1})}}});async function Xs(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,"api/bans/ranks"),location.href);return n.searchParams.set("limit",String(e)),fetch(n,{headers:q()}).then(a=>(t.assertResponseLogin(a),a.json()))}const Qs={class:"search-box"},el=P({__name:"top50Table",props:{topNumber:{type:Number,required:!0}},setup(e){const t=fe(),n=N(),{t:a}=x(),o=[{title:()=>a("page.topban.top50Table.column.ipaddress"),dataIndex:"address",filterable:{filter:(m,p)=>p.address.includes(m[0]),slotName:"ip-filter",icon:()=>En(ia)}},{title:()=>a("page.topban.top50Table.column.historyCount"),dataIndex:"count"}],s=e,r=L(()=>s.topNumber),{data:c,loading:d,refresh:g}=me(()=>Xs(r.value),{pollingInterval:L(()=>t.pollingInterval),onSuccess:t.renewLastUpdate,cacheKey:()=>`${n.endpoint}-topban-${r.value}`});return ue([r,()=>n.endpoint],()=>{g()}),(m,p)=>{const f=an,v=H,h=Ce;return w(),I(h,{stripe:"","sticky-header":"",columns:o,data:u(c),"column-resizable":"",loading:u(d),pagination:{showPageSize:!0,baseSize:4,bufferSize:1},"filter-icon-align-left":""},{"ip-filter":l(({filterValue:k,setFilterValue:S,handleFilterConfirm:y,handleFilterReset:C})=>[j("div",Qs,[i(v,{direction:"vertical"},{default:l(()=>[i(f,{"model-value":k[0],placeholder:u(a)("page.topban.top50Table.searchPlaceholder"),"allow-clear":"",onSearch:y,onClear:C,onInput:$=>S([$])},null,8,["model-value","placeholder","onSearch","onClear","onInput"])]),_:2},1024)])]),_:1},8,["data","loading"])}}}),tl=se(el,[["__scopeId","data-v-918dd8d5"]]),nl=P({__name:"index",setup(e){const t=A(50);return(n,a)=>{const o=J,s=Ie,r=ln,c=sn,d=ca,g=ua,m=H;return w(),E(he,null,[i(o,{style:{"font-size":"1.2em"}},{default:l(()=>[b(_(n.$t("page.topban.description")),1)]),_:1}),i(c,null,{default:l(()=>[i(s,{heading:3},{default:l(()=>[b(_(n.$t("page.topban.title",{topNumber:t.value})),1)]),_:1}),i(r,null,{default:l(()=>[b(_(n.$t("page.topban.usage")),1)]),_:1})]),_:1}),i(m,{fill:"",direction:"vertical"},{default:l(()=>[i(m,null,{default:l(()=>[i(o,null,{default:l(()=>[b(_(n.$t("page.topban.onlyShow")),1)]),_:1}),i(g,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=p=>t.value=p),"trigger-props":{autoFitPopupMinWidth:!0}},{default:l(()=>[i(d,{value:10},{default:l(()=>[b("10")]),_:1}),i(d,{value:20},{default:l(()=>[b("20")]),_:1}),i(d,{value:30},{default:l(()=>[b("30")]),_:1}),i(d,{value:40},{default:l(()=>[b("40")]),_:1}),i(d,{value:50},{default:l(()=>[b("50")]),_:1})]),_:1},8,["modelValue"]),i(o,null,{default:l(()=>[b(_(n.$t("page.topban.onlyShow.number")),1)]),_:1})]),_:1}),i(tl,{"top-number":t.value},null,8,["top-number"])]),_:1})],64)}}});async function al(){const e=N();await e.serverAvailable;const t=new URL(D(e.endpoint,"api/statistic/rules"),location.href);return fetch(t,{headers:q()}).then(n=>(e.assertResponseLogin(n),n.json()))}const ol={class:"search-box"},rl=P({__name:"ruleMetricsTable",setup(e){const t=fe(),{t:n}=x(),a=N(),{data:o,refresh:s,loading:r}=me(al,{pollingInterval:L(()=>t.pollingInterval),onSuccess:t.renewLastUpdate,cacheKey:()=>`${a.endpoint}-ruleStatic`}),c=g=>{var m;return(m=o.value)!=null&&m.dict[g]?Ge(g):"gray"},d=[{title:()=>n("page.ruleMetrices.metricsTable.column.type"),slotName:"type",width:200},{title:()=>n("page.ruleMetrices.metricsTable.column.content"),slotName:"ruleName",width:200},{title:()=>n("page.ruleMetrices.metricsTable.column.run"),dataIndex:"query",width:200},{title:()=>n("page.ruleMetrices.metricsTable.column.hit"),dataIndex:"hit",filterable:{filter:(g,m)=>g[0]==="yes"&&m.hit>0,slotName:"hit-filter"},width:200}];return ue(()=>a.endpoint,s),(g,m)=>{var y;const p=on,f=Ee,v=J,h=Lt,k=H,S=Ce;return w(),I(S,{columns:d,data:(y=u(o))==null?void 0:y.data,size:"large",loading:u(r),"column-resizable":"","filter-icon-align-left":"",pagination:{showPageSize:!0,baseSize:4,bufferSize:1}},{empty:l(()=>[i(p)]),type:l(({record:C})=>[i(f,{color:c(C.type)},{default:l(()=>{var $;return[b(_((($=u(o))==null?void 0:$.dict[C.type])??C.type),1)]}),_:2},1032,["color"])]),ruleName:l(({record:C})=>[i(v,{code:""},{default:l(()=>[b(_(C.metadata.rule),1)]),_:2},1024)]),"hit-filter":l(({filterValue:C,handleFilterConfirm:$,handleFilterReset:T})=>[j("div",ol,[i(k,null,{default:l(()=>[i(h,{modelValue:C[0],"onUpdate:modelValue":M=>C[0]=M,"checked-value":"yes","unchecked-value":"no",onChange:M=>M==="yes"?$():T()},null,8,["modelValue","onUpdate:modelValue","onChange"]),i(v,null,{default:l(()=>[b(_(u(n)("page.ruleMetrices.metricsTable.filter")),1)]),_:1})]),_:2},1024)])]),_:1},8,["data","loading"])}}}),sl=se(rl,[["__scopeId","data-v-f4351b0d"]]),ll=P({__name:"index",setup(e){return(t,n)=>{const a=Ie,o=ln,s=sn;return w(),E(he,null,[i(s,null,{default:l(()=>[i(a,{heading:3},{default:l(()=>[b(_(t.$t("page.ruleMetrices.title")),1)]),_:1}),i(o,null,{default:l(()=>[b(_(t.$t("page.ruleMetrices.description")),1)]),_:1})]),_:1}),i(sl)],64)}}});async function il(){const e=N();await e.serverAvailable;const t=new URL(D(e.endpoint,"api/sub/rules"),location.href);return fetch(t,{headers:q()}).then(n=>(e.assertResponseLogin(n),n.json()))}async function cl(e,t){const n=N();await n.serverAvailable;const a=new URL(D(n.endpoint,`api/sub/rule/${e}`),location.href);return fetch(a,{headers:q(),method:"PATCH",body:JSON.stringify({enabled:t})}).then(o=>(n.assertResponseLogin(o),o.json()))}async function ul({ruleId:e,ruleName:t,subUrl:n}){const a=N();await a.serverAvailable;const o=new URL(D(a.endpoint,`/api/sub/rule/${e}`),location.href);return fetch(o,{headers:q(),method:"POST",body:JSON.stringify({ruleName:t,subUrl:n})}).then(s=>(a.assertResponseLogin(s),s.json()))}async function dl({ruleId:e,ruleName:t,subUrl:n}){const a=N();await a.serverAvailable;const o=new URL(D(a.endpoint,"api/sub/rule"),location.href);return fetch(o,{headers:q(),method:"PUT",body:JSON.stringify({ruleId:e,ruleName:t,subUrl:n})}).then(s=>(a.assertResponseLogin(s),s.json()))}async function pl(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,`api/sub/rule/${e}/update`),location.href);return fetch(n,{headers:q(),method:"POST"}).then(a=>(t.assertResponseLogin(a),a.json()))}async function ml(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,`/api/sub/rule/${e}`),location.href);return fetch(n,{headers:q(),method:"DELETE"}).then(a=>(t.assertResponseLogin(a),a.json()))}async function gl(){const e=N();await e.serverAvailable;const t=new URL(D(e.endpoint,"/api/sub/rules/update"),location.href);return fetch(t,{headers:{...q(),"X-Audit":"Rule deletion"},method:"POST"}).then(n=>(e.assertResponseLogin(n),n.json()))}async function fl(){const e=N();await e.serverAvailable;const t=new URL(D(e.endpoint,"api/sub/interval"),location.href);return fetch(t,{headers:q()}).then(n=>(e.assertResponseLogin(n),n.json()))}async function bl(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,"api/sub/interval"),location.href);return fetch(n,{headers:q(),method:"PATCH",body:JSON.stringify({checkInterval:e})}).then(a=>(t.assertResponseLogin(a),a.json()))}async function hl(e){const t=N();await t.serverAvailable;const n=new URL(D(t.endpoint,"/api/sub/logs"),location.href);return n.searchParams.set("pageIndex",String(e.pageIndex-1)),e.pageSize&&n.searchParams.set("pageSize",String(e.pageSize)),fetch(n,{headers:q()}).then(a=>a.json()).then(a=>(t.assertResponseLogin(a),{...a.data,pageIndex:a.pageIndex+1}))}const _l=P({__name:"asyncMethod",props:{once:{type:Boolean},asyncFn:{type:Function}},setup(e){const t=A(0),n=A(!1),a=A(),o=e,s=async(...r)=>{if(n.value&&o.once)return;n.value=!0;const c=++t.value;return Promise.resolve(o.asyncFn(...r)).catch(d=>{c===t.value&&(a.value=d)}).finally(()=>{c===t.value&&(n.value=!1)})};return(r,c)=>Rn(r.$slots,"default",{run:s,loading:n.value,error:a.value})}});function le(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Gt(e,t){for(var n="",a=0,o=-1,s=0,r,c=0;c<=e.length;++c){if(c<e.length)r=e.charCodeAt(c);else{if(r===47)break;r=47}if(r===47){if(!(o===c-1||s===1))if(o!==c-1&&s===2){if(n.length<2||a!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var d=n.lastIndexOf("/");if(d!==n.length-1){d===-1?(n="",a=0):(n=n.slice(0,d),a=n.length-1-n.lastIndexOf("/")),o=c,s=0;continue}}else if(n.length===2||n.length===1){n="",a=0,o=c,s=0;continue}}t&&(n.length>0?n+="/..":n="..",a=2)}else n.length>0?n+="/"+e.slice(o+1,c):n=e.slice(o+1,c),a=c-o-1;o=c,s=0}else r===46&&s!==-1?++s:s=-1}return n}function vl(e,t){var n=t.dir||t.root,a=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+a:n+e+a:a}var Le={resolve:function(){for(var t="",n=!1,a,o=arguments.length-1;o>=-1&&!n;o--){var s;o>=0?s=arguments[o]:(a===void 0&&(a=ke.cwd()),s=a),le(s),s.length!==0&&(t=s+"/"+t,n=s.charCodeAt(0)===47)}return t=Gt(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(le(t),t.length===0)return".";var n=t.charCodeAt(0)===47,a=t.charCodeAt(t.length-1)===47;return t=Gt(t,!n),t.length===0&&!n&&(t="."),t.length>0&&a&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return le(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var a=arguments[n];le(a),a.length>0&&(t===void 0?t=a:t+="/"+a)}return t===void 0?".":Le.normalize(t)},relative:function(t,n){if(le(t),le(n),t===n||(t=Le.resolve(t),n=Le.resolve(n),t===n))return"";for(var a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var o=t.length,s=o-a,r=1;r<n.length&&n.charCodeAt(r)===47;++r);for(var c=n.length,d=c-r,g=s<d?s:d,m=-1,p=0;p<=g;++p){if(p===g){if(d>g){if(n.charCodeAt(r+p)===47)return n.slice(r+p+1);if(p===0)return n.slice(r+p)}else s>g&&(t.charCodeAt(a+p)===47?m=p:p===0&&(m=0));break}var f=t.charCodeAt(a+p),v=n.charCodeAt(r+p);if(f!==v)break;f===47&&(m=p)}var h="";for(p=a+m+1;p<=o;++p)(p===o||t.charCodeAt(p)===47)&&(h.length===0?h+="..":h+="/..");return h.length>0?h+n.slice(r+m):(r+=m,n.charCodeAt(r)===47&&++r,n.slice(r))},_makeLong:function(t){return t},dirname:function(t){if(le(t),t.length===0)return".";for(var n=t.charCodeAt(0),a=n===47,o=-1,s=!0,r=t.length-1;r>=1;--r)if(n=t.charCodeAt(r),n===47){if(!s){o=r;break}}else s=!1;return o===-1?a?"/":".":a&&o===1?"//":t.slice(0,o)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');le(t);var a=0,o=-1,s=!0,r;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var c=n.length-1,d=-1;for(r=t.length-1;r>=0;--r){var g=t.charCodeAt(r);if(g===47){if(!s){a=r+1;break}}else d===-1&&(s=!1,d=r+1),c>=0&&(g===n.charCodeAt(c)?--c===-1&&(o=r):(c=-1,o=d))}return a===o?o=d:o===-1&&(o=t.length),t.slice(a,o)}else{for(r=t.length-1;r>=0;--r)if(t.charCodeAt(r)===47){if(!s){a=r+1;break}}else o===-1&&(s=!1,o=r+1);return o===-1?"":t.slice(a,o)}},extname:function(t){le(t);for(var n=-1,a=0,o=-1,s=!0,r=0,c=t.length-1;c>=0;--c){var d=t.charCodeAt(c);if(d===47){if(!s){a=c+1;break}continue}o===-1&&(s=!1,o=c+1),d===46?n===-1?n=c:r!==1&&(r=1):n!==-1&&(r=-1)}return n===-1||o===-1||r===0||r===1&&n===o-1&&n===a+1?"":t.slice(n,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return vl("/",t)},parse:function(t){le(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var a=t.charCodeAt(0),o=a===47,s;o?(n.root="/",s=1):s=0;for(var r=-1,c=0,d=-1,g=!0,m=t.length-1,p=0;m>=s;--m){if(a=t.charCodeAt(m),a===47){if(!g){c=m+1;break}continue}d===-1&&(g=!1,d=m+1),a===46?r===-1?r=m:p!==1&&(p=1):r!==-1&&(p=-1)}return r===-1||d===-1||p===0||p===1&&r===d-1&&r===c+1?d!==-1&&(c===0&&o?n.base=n.name=t.slice(1,d):n.base=n.name=t.slice(c,d)):(c===0&&o?(n.name=t.slice(1,r),n.base=t.slice(1,d)):(n.name=t.slice(c,r),n.base=t.slice(c,d)),n.ext=t.slice(r,d)),c>0?n.dir=t.slice(0,c-1):o&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};Le.posix=Le;var yl=Le;const kl=xn(yl),wl=P({__name:"editRuleItemModal",setup(e,{expose:t}){const{t:n}=x(),a=A(!1),o=A(!1),s=Qt({ruleId:"",ruleName:"",subUrl:""}),r={ruleId:[{required:!0}],ruleName:[{required:!0,message:n("page.ruleSubscribe.editModal.form.name.required")}],subUrl:[{type:"url",required:!0}]};let c;t({showModal:(p,f,v)=>{o.value=p,c=f,!p&&v?(s.ruleId=v.ruleId,s.ruleName=v.ruleName,s.subUrl=v.subUrl):(s.ruleId=Math.random().toString(36).slice(2,10),s.ruleName="",s.subUrl=""),a.value=!0}});const d=A(),g=async()=>{var f;if(await((f=d.value)==null?void 0:f.validate()))return!1;if(o.value){const v=await dl(s);return v.success?(c&&c(s),!0):(W.error(v.message),!0)}else{const v=await ul(s);return v.success?(c&&c(s),!0):(W.error(v.message),!0)}},m=p=>{if(!s.ruleName)try{const f=new URL(p),v=kl.parse(f.pathname).name;s.ruleName=v}catch{}};return(p,f)=>{const v=cn,h=Fe,k=da,S=We,y=je;return w(),I(y,{visible:a.value,"onUpdate:visible":f[3]||(f[3]=C=>a.value=C),title:o.value?u(n)("page.ruleSubscribe.editModal.title.new"):u(n)("page.ruleSubscribe.editModal.title"),unmountOnClose:"",onBeforeOk:g},{default:l(()=>[i(S,{ref_key:"formRef",ref:d,model:s,rules:r},{default:l(()=>[i(h,{field:"ruleId",label:"ID"},{extra:l(()=>[b(_(u(n)("page.ruleSubscribe.editModal.form.id.extra")),1)]),default:l(()=>[i(v,{modelValue:s.ruleId,"onUpdate:modelValue":f[0]||(f[0]=C=>s.ruleId=C),disabled:!o.value,"allow-clear":""},null,8,["modelValue","disabled"])]),_:1}),i(h,{field:"ruleName",label:u(n)("page.ruleSubscribe.editModal.form.name")},{default:l(()=>[i(v,{modelValue:s.ruleName,"onUpdate:modelValue":f[1]||(f[1]=C=>s.ruleName=C),"allow-clear":""},null,8,["modelValue"])]),_:1},8,["label"]),i(h,{field:"subUrl",label:"URL"},{default:l(()=>[i(k,{modelValue:s.subUrl,"onUpdate:modelValue":f[2]||(f[2]=C=>s.subUrl=C),"allow-clear":"",onChange:m,"auto-size":{minRows:2,maxRows:5}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title"])}}}),Sl=P({__name:"settingsModal",setup(e,{expose:t}){const{t:n}=x(),a=A(!1);t({showModal:()=>{a.value=!0}});const o=g=>{const m=g.split(".");return m[0]=m[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),m.join(".")},s=g=>g.replace(/,/g,"");function r(g){const m=Math.floor(g/864e5);g%=864e5;const p=Math.floor(g/36e5);g%=36e5;const f=Math.floor(g/6e4);g%=6e4;const v=Math.floor(g/1e3);let h="";return m>0&&(h+=`${m} Day${m>1?"s":""} `),p>0&&(h+=`${p} Hour${p>1?"s":""} `),f>0&&(h+=`${f} Minute${f>1?"s":""} `),v>0&&(h+=`${v} Second${v>1?"s":""} `),h.trim()}const c=Qt({checkInterval:0});me(fl,{onSuccess:g=>{c.checkInterval=g.data}});const d=async()=>{const g=await bl(c.checkInterval);return g.success?(W.success(g.message),!0):(W.error(g.message),!1)};return(g,m)=>{const p=un,f=Fe,v=We,h=je;return w(),I(h,{visible:a.value,"onUpdate:visible":m[1]||(m[1]=k=>a.value=k),title:u(n)("page.ruleSubscribe.settingsModal.title"),unmountOnClose:"","modal-style":{width:"35vw"},onBeforeOk:d},{default:l(()=>[i(v,{model:c},{default:l(()=>[i(f,{field:"checkInterval",label:u(n)("page.ruleSubscribe.settingsModal.checkInterval")},{extra:l(()=>[b(_(r(c.checkInterval)),1)]),default:l(()=>[i(p,{modelValue:c.checkInterval,"onUpdate:modelValue":m[0]||(m[0]=k=>c.checkInterval=k),step:1e3,min:1e3,formatter:o,parser:s},{suffix:l(()=>[b(" ms ")]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["visible","title"])}}});var He=(e=>(e.AUTO="AUTO",e.MANUAL="MANUAL",e))(He||{});const $l=P({__name:"logModal",setup(e,{expose:t}){const{t:n,d:a}=x(),o=A(!1);t({showModal:()=>{o.value=!0}});const s=[{title:"ID",slotName:"ruleId"},{title:()=>n("page.ruleSubscribe.updateLog.updateTime"),slotName:"updateTime"},{title:()=>n("page.ruleSubscribe.updateLog.ruleCount"),dataIndex:"count"},{title:()=>n("page.ruleSubscribe.updateLog.updateType"),slotName:"updateType"}],r=A(!0),c={[He.MANUAL]:"page.ruleSubscribe.updateLog.updateType.manual",[He.AUTO]:"page.ruleSubscribe.updateLog.updateType.auto"},d=L(()=>r.value||f.value||!k.value),{data:g,total:m,current:p,loading:f,pageSize:v,changeCurrent:h}=Xt(hl,{defaultParams:[{pageIndex:1,pageSize:5}],pagination:{currentKey:"pageIndex",pageSizeKey:"pageSize",totalKey:"total"},onAfter:()=>{r.value=!1}});ue([v,p],()=>{r.value=!0});const k=L(()=>{var S;return(S=g.value)==null?void 0:S.results});return(S,y)=>{const C=Ee,$=J,T=Ce,M=je;return w(),I(M,{visible:o.value,"onUpdate:visible":y[0]||(y[0]=U=>o.value=U),title:u(n)("page.ruleSubscribe.updateLog"),unmountOnClose:"","modal-style":{width:"35vw"}},{default:l(()=>[i(T,{stripe:!0,columns:s,data:k.value,loading:d.value,pagination:{total:u(m),current:u(p),pageSize:u(v),showPageSize:!0,baseSize:4,bufferSize:1},size:"medium",onPageChange:u(h),class:"banlog-table"},{ruleId:l(({record:U})=>[i(C,{color:u(Ge)(U.ruleId)},{default:l(()=>[b(_(U.ruleId),1)]),_:2},1032,["color"])]),updateTime:l(({record:U})=>[i($,null,{default:l(()=>[b(_(u(a)(U.updateTime,"long")),1)]),_:2},1024)]),updateType:l(({record:U})=>[i(C,{color:U.updateType===u(He).MANUAL?"green":"blue"},{default:l(()=>[b(_(u(n)(c[U.updateType]??"page.ruleSubscribe.updateLog.updateType.unknown")),1)]),_:2},1032,["color"])]),_:1},8,["data","loading","pagination","onPageChange"])]),_:1},8,["visible","title"])}}}),Tl=P({__name:"ruleList",setup(e){const{t,d:n}=x(),{data:a,loading:o,refresh:s}=me(il,{}),r=A(),c=A(),d=A(),g=[{title:()=>t("page.ruleSubscribe.column.status"),slotName:"status"},{title:"ID",slotName:"ruleId"},{title:()=>t("page.ruleSubscribe.column.ruleName"),dataIndex:"ruleName"},{title:"URL",slotName:"url"},{title:()=>t("page.ruleSubscribe.column.lastUpdated"),slotName:"lastUpdated"},{title:()=>t("page.ruleSubscribe.column.rulesCount"),slotName:"rulesCount"},{title:()=>t("page.ruleSubscribe.column.actions"),slotName:"action"}],m=S=>{var y;(y=r.value)==null||y.showModal(!1,()=>s(),S)},p=()=>{var S;(S=r.value)==null||S.showModal(!0,()=>s())},f=S=>pl(S).then(y=>{y.success?W.info(y.message):W.error(y.message),s()}),v=async S=>{const y=await ml(S);return y.success?W.success(y.message):W.error(y.message),s(),!0},h=A(!1),k=async()=>{h.value=!0;const S=await gl();S.success?W.success(S.message):W.error(S.message),s(),h.value=!1};return(S,y)=>{const C=Lr,$=xe,T=Vr,M=Ln,U=Re,V=xr,F=pa,K=H,Y=Ee,Z=J,ae=Lt,z=ma,oe=ga,Cn=fa,In=Ce;return w(),I(K,{direction:"vertical",fill:""},{default:l(()=>{var Nt;return[i(K,{class:"align-right",fill:""},{default:l(()=>[i($,{type:"primary",onClick:p},{icon:l(()=>[i(C)]),default:l(()=>[b(" "+_(S.$t("page.ruleSubscribe.addRule")),1)]),_:1}),i(F,null,{default:l(()=>[i($,{loading:h.value,onClick:k},{icon:l(()=>[i(T)]),default:l(()=>[b(" "+_(u(t)("page.ruleSubscribe.updateAll")),1)]),_:1},8,["loading"]),i(U,{content:u(t)("page.ruleSubscribe.settingsTips")},{default:l(()=>{var R;return[i($,{onClick:(R=c.value)==null?void 0:R.showModal},{icon:l(()=>[i(M)]),_:1},8,["onClick"])]}),_:1},8,["content"]),i(U,{content:u(t)("page.ruleSubscribe.updateLog")},{default:l(()=>{var R;return[i($,{onClick:(R=d.value)==null?void 0:R.showModal},{icon:l(()=>[i(V)]),_:1},8,["onClick"])]}),_:1},8,["content"])]),_:1})]),_:1}),i(In,{stripe:"",columns:g,data:(Nt=u(a))==null?void 0:Nt.data,loading:u(o)},{ruleId:l(({record:R})=>[i(Y,{color:u(Ge)(R.ruleId)},{default:l(()=>[b(_(R.ruleId),1)]),_:2},1032,["color"])]),url:l(({record:R})=>[i(Z,{copyable:"",ellipsis:{showTooltip:!0}},{default:l(()=>[b(_(R.subUrl),1)]),_:2},1024)]),status:l(({record:R})=>[i(K,null,{default:l(()=>[i(ae,{modelValue:R.enabled,"onUpdate:modelValue":Ae=>R.enabled=Ae,beforeChange:async Ae=>{const Be=await u(cl)(R.ruleId,Ae);return Be.success?(u(s)(),!0):(u(W).error(Be.message),!1)}},null,8,["modelValue","onUpdate:modelValue","beforeChange"])]),_:2},1024)]),lastUpdated:l(({record:R})=>[i(Z,null,{default:l(()=>[b(_(R.lastUpdate>0?u(n)(R.lastUpdate,"long"):u(t)("page.ruleSubscribe.column.notUpdated")),1)]),_:2},1024)]),rulesCount:l(({record:R})=>[i(Z,null,{default:l(()=>[b(_(R.enabled?R.entCount:"NaN"),1)]),_:2},1024)]),action:l(({record:R})=>[i(K,{warp:""},{default:l(()=>[i(U,{content:u(t)("page.ruleSubscribe.column.actions.edit"),position:"top",mini:""},{default:l(()=>[i($,{class:"edit-btn",shape:"circle",type:"text",onClick:()=>m(R)},{icon:l(()=>[i(z)]),_:2},1032,["onClick"])]),_:2},1032,["content"]),i(_l,{once:"","async-fn":()=>f(R.ruleId)},{default:l(({run:Ae,loading:Be})=>[i(U,{content:u(t)("page.ruleSubscribe.column.actions.update"),position:"top",mini:""},{default:l(()=>[i($,{class:"edit-btn",shape:"circle",type:"text",onClick:Ae},{icon:l(()=>[i(T,{spin:Be},null,8,["spin"])]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:2},1032,["async-fn"]),i(Cn,{content:u(t)("page.ruleSubscribe.column.deleteConfirm"),type:"warning",onBeforeOk:()=>v(R.ruleId)},{default:l(()=>[i($,{class:"edit-btn",status:"danger",shape:"circle",type:"text"},{icon:l(()=>[i(oe)]),_:1})]),_:2},1032,["content","onBeforeOk"])]),_:2},1024)]),_:1},8,["data","loading"]),i(wl,{ref_key:"editModal",ref:r},null,512),i(Sl,{ref_key:"settingsModal",ref:c},null,512),i($l,{ref_key:"updateLog",ref:d},null,512)]}),_:1})}}}),Ll=se(Tl,[["__scopeId","data-v-3c38c549"]]),Cl=P({__name:"index",setup(e){const{t}=x();return(n,a)=>{const o=J,s=H;return w(),I(s,{direction:"vertical",fill:""},{default:l(()=>[i(o,{style:{"font-size":"1.2em"}},{default:l(()=>[b(_(u(t)("page.ruleSubscribe.description")),1)]),_:1}),i(Ll)]),_:1})}}}),Pt=[{path:"/dashboard",name:"dashboard",meta:{label:"router.dashboard"},component:Es},{path:"/list",name:"banlist",meta:{label:"router.banlist"},component:Ks},{path:"/log",name:"banlogs",meta:{label:"router.banlogs"},component:Zs},{path:"/top",name:"top",meta:{label:"router.topban"},component:nl},{path:"/metrics",name:"rule_metrics",meta:{label:"router.ruleMetrics"},component:ll},{path:"/subscribe",name:"rule_subscribe",meta:{label:"router.ruleSubscribe",disableAutoUpdate:!0,moduleRequire:"com.ghostchu.peerbanhelper.module.impl.webapi.RuleSubController",documentation:"https://github.com/PBH-BTN/PeerBanHelper/wiki/%E8%A7%84%E5%88%99%E8%AE%A2%E9%98%85%E5%8A%9F%E8%83%BD"},component:Cl}];let Ve=location.pathname;var Jt;for(const e of Pt)if(!((Jt=e.meta)!=null&&Jt.hidden)&&Ve.endsWith(e.path)){Ve=Ve.slice(0,-e.path.length);break}const Il=On({history:Bn(Ve),routes:Pt});function Al(){const e=Dn(),t=_t(),n=s=>{e.replace({name:`${s}`})},a=L(()=>Pt.filter(s=>{var r;return!((r=s.meta)!=null&&r.hidden)})),o=L(()=>t.name);return[a,o,n]}const Pl=["href"],Nl={key:1},Ml=P({__name:"pageFooter",setup(e){const{t}=x(),n="1.6.1",a=`9bf79332c2609c91de64fdb579150ddc4b4f5540
`,o=N(),s=L(()=>{var d;return(d=o.serverManifest)==null?void 0:d.version}),r=L(()=>o.latestVersion),c=L(()=>{var d,g;return wn(((d=o.latestVersion)==null?void 0:d.tagName)??"1.0",((g=o.serverManifest)==null?void 0:g.version.version)??"1.0",">")});return ue(()=>o.checkUpgradeError,d=>{W.error(`${t("settings.accessToken.error")},error:${d}`)}),(d,g)=>{const m=ba,p=Tt,f=H,v=vt,h=yt,k=wt,S=St;return w(),I(S,{align:"center",justify:"center"},{default:l(()=>[i(k,{class:"footer"},{default:l(()=>[i(h,{column:{xs:1,md:3,lg:4}},{default:l(()=>[i(v,{label:"Backend Version"},{default:l(()=>[i(f,null,{default:l(()=>{var y,C,$;return[c.value?(w(),E("a",{key:0,href:(y=r.value)==null?void 0:y.url},[i(m,{dot:"",count:1,offset:[8,-1]},{default:l(()=>{var T;return[b(_((T=s.value)==null?void 0:T.version),1)]}),_:1})],8,Pl)):(w(),E("div",Nl,_((C=s.value)==null?void 0:C.version),1)),j("div",null,[b(" ("),i(p,{href:`https://github.com/Ghost-chu/PeerBanHelper/commit/${($=s.value)==null?void 0:$.commit}`},{default:l(()=>{var T;return[b(_((T=s.value)==null?void 0:T.commit.substring(0,8)),1)]}),_:1},8,["href"]),b(") ")])]}),_:1})]),_:1}),i(v,{label:"WebUI Version"},{default:l(()=>[i(f,null,{default:l(()=>[b(_(u(n))+" ",1),j("div",null,[b(" ("),i(p,{href:`https://github.com/Gaojianli/pbh-fe/commit/${u(a)}`},{default:l(()=>[b(_(u(a).substring(0,8)),1)]),_:1},8,["href"]),b(") ")])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}}),Ul=se(Ml,[["__scopeId","data-v-0dda03bd"]]),zl=["innerHTML"],jl=P({__name:"settingsModal",setup(e,{expose:t}){const n=N(),a=fe(),o=A(!1),s=L(()=>n.loading),r=L(()=>n.status==="fail"),c=A({endpoint:n.endpoint,interval:a.interval,accessToken:n.accessToken}),{t:d}=x();function g(){c.value.endpoint=n.endpoint,c.value.interval=a.interval}t({showModal:()=>{o.value=!0,g()}});const m=()=>{if(!s.value)return a.interval=c.value.interval,n.setAccessToken(c.value.accessToken),n.setEndpoint(c.value.endpoint)};ue(()=>n.error,v=>{be.is(v)?p():$e.is(v)?(W.error(d(v.message)),!o.value&&v.isApiWrong&&(o.value=!0,g())):v&&(W.error(`${d("settings.endpoint.error")},error:${v}`),o.value||(o.value=!0,g()))},{immediate:!0});const p=()=>{o.value=!1,g()},f=$t(A({md:1}),0);return(v,h)=>{const k=cn,S=Fe,y=un,C=We,$=je;return w(),I($,{"modal-style":{"max-width":"80vw"},visible:o.value,"onUpdate:visible":h[3]||(h[3]=T=>o.value=T),onBeforeOk:m,onCancel:p,closable:!r.value,maskClosable:!r.value,"hide-cancel":r.value,"ok-loading":s.value},{title:l(()=>[b(_(u(d)("settings.modal.title")),1)]),default:l(()=>[i(C,{model:c.value,onSubmit:m,layout:["vertical","horizontal"][u(f)],"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:l(()=>[i(S,{field:"endpoint",label:"Endpoint:",tooltip:u(d)("settings.modal.endpointTips"),"validate-trigger":"input"},{default:l(()=>[i(k,{modelValue:c.value.endpoint,"onUpdate:modelValue":h[0]||(h[0]=T=>c.value.endpoint=T),placeholder:"http://localhost:8989","allow-clear":""},null,8,["modelValue"])]),_:1},8,["tooltip"]),i(S,{field:"interval",label:u(d)("settings.modal.pollInterval"),"validate-trigger":"input"},{default:l(()=>[i(y,{modelValue:c.value.interval,"onUpdate:modelValue":h[1]||(h[1]=T=>c.value.interval=T),placeholder:"3000",min:100,"hide-button":""},{suffix:l(()=>[b(" ms ")]),_:1},8,["modelValue"])]),_:1},8,["label"]),i(S,{field:"accessToken",label:"Access Token:","validate-trigger":"input"},{extra:l(()=>[j("div",{innerHTML:u(d)("settings.modal.accessTokenTips")},null,8,zl)]),default:l(()=>[i(k,{modelValue:c.value.accessToken,"onUpdate:modelValue":h[2]||(h[2]=T=>c.value.accessToken=T),"allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","layout"])]),_:1},8,["visible","closable","maskClosable","hide-cancel","ok-loading"])}}}),El=se(jl,[["__scopeId","data-v-9b0a9c0f"]]);function Rl(){const e=x({useScope:"global"});return{changeLocale:n=>{var a;e.locale.value===n||!e.availableLocales.includes(n)||(e.locale.value=n,(a=document.querySelector("html"))==null||a.setAttribute("lang",n),W.success(e.t("navbar.action.locale")))}}}const xl={class:"lang-selector"},Ol=P({__name:"pageHeader",props:{disableAutoUpdate:{type:Boolean,default:!1}},setup(e){const{t,d:n,locale:a}=x(),{changeLocale:o}=Rl(),s=[...Qa],r=fe(),c=qn({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:null}),d=A(),g=Hn(c),m=()=>{g()},p=e,f=L(()=>p.disableAutoUpdate);return(v,h)=>{const k=rn,S=J,y=Lt,C=bs,$=xe,T=Re,M=va,U=ya,V=ha,F=ns,K=cs,Y=Ln,Z=H,ae=_a;return w(),E(he,null,[i(ae,{title:"PeerBanHelper","show-back":!1},{extra:l(()=>[i(Z,{class:"right-side",wrap:""},{default:l(()=>{var z;return[f.value?X("",!0):(w(),E(he,{key:0},[i(S,null,{default:l(()=>[i(k),b(" "+_(u(t)("navbar.action.autoUpdate.lastUpdate"))+_(u(n)(u(r).lastUpdate,"longlong")),1)]),_:1}),i(y,{modelValue:u(r).autoUpdate,"onUpdate:modelValue":h[0]||(h[0]=oe=>u(r).autoUpdate=oe)},null,8,["modelValue"]),i(S,null,{default:l(()=>[b(_(u(t)("navbar.action.autoUpdate")),1)]),_:1})],64)),j("div",xl,[i(V,{trigger:"click",onSelect:h[1]||(h[1]=oe=>u(o)(oe))},{content:l(()=>[(w(),E(he,null,ht(s,oe=>i(U,{key:oe.value,value:oe.value},{icon:l(()=>[Vn(i(M,null,null,512),[[Fn,oe.value===u(a)]])]),default:l(()=>[b(" "+_(oe.label),1)]),_:2},1032,["value"])),64))]),default:l(()=>[i(T,{content:u(t)("settings.language")},{default:l(()=>[i($,{class:"nav-btn",type:"outline",shape:"circle"},{icon:l(()=>[i(C)]),_:1})]),_:1},8,["content"])]),_:1})]),i(T,{content:u(c)?u(t)("settings.navbar.theme.toLight"):u(t)("settings.navbar.theme.toDark")},{default:l(()=>[i($,{class:"nav-btn",type:"outline",shape:"circle",onClick:m},{icon:l(()=>[u(c)?(w(),I(F,{key:0})):(w(),I(K,{key:1}))]),_:1})]),_:1},8,["content"]),i($,{class:"nav-btn",type:"outline",shape:"circle",status:"normal",onClick:(z=d.value)==null?void 0:z.showModal},{icon:l(()=>[i(Y)]),_:1},8,["onClick"])]}),_:1})]),_:1}),i(El,{ref_key:"settingsModalRef",ref:d},null,512)],64)}}}),Bl=se(Ol,[["__scopeId","data-v-ba380ce7"]]),Dl=P({__name:"index",setup(e){const t=N(),{t:n}=x(),a=A(!1),o=A({rememberPassword:!0,token:t.authToken}),s=A(),r=async({errors:d,values:g})=>{var v,h,k;const m=d?Object.keys(d):[];if(m.length>0){(v=s.value)==null||v.scrollToField(m[0]);return}const{token:p,rememberPassword:f}=g;if(!a.value){a.value=!0,(h=s.value)==null||h.setFields({token:{status:"validating",message:""}});try{await t.setAuthToken(p,f),W.success(n("login.form.login.success"))}catch(S){(k=s.value)==null||k.setFields({token:{status:"error",message:`${n("login.form.login.failed")}  ${S.message}`}})}finally{a.value=!1}}},{query:c}=_t();return Zt(()=>{var d;c.token&&(o.value.token=c.token,(d=s.value)==null||d.$emit("submit",{values:o.value,errors:void 0},new Event("submit")))}),(d,g)=>{const m=Ie,p=Ps,f=ka,v=Fe,h=wa,k=Tt,S=xe,y=We,C=H,$=wt,T=St;return w(),I(T,{justify:"center"},{default:l(()=>[i($,{xs:24,sm:20,md:16,lg:12,xl:8},{default:l(()=>[i(C,{direction:"vertical",fill:""},{default:l(()=>[i(m,{heading:3},{default:l(()=>[b(_(d.$t("login.form.title")),1)]),_:1}),i(y,{ref_key:"loginForm",ref:s,model:o.value,class:"login-form",layout:"vertical",onSubmit:r},{default:l(()=>[i(v,{field:"token",rules:[{required:!0,message:d.$t("login.form.password.errMsg")}],"validate-trigger":["change","input"],"hide-label":""},{default:l(()=>[i(f,{modelValue:o.value.token,"onUpdate:modelValue":g[0]||(g[0]=M=>o.value.token=M),placeholder:d.$t("login.form.password.placeholder"),"allow-clear":""},{prefix:l(()=>[i(p)]),_:1},8,["modelValue","placeholder"])]),_:1},8,["rules"]),i(v,{field:"rememberPassword",class:"login-form-password-actions"},{default:l(()=>[i(h,{checked:"rememberPassword","model-value":o.value.rememberPassword},{default:l(()=>[b(_(d.$t("login.form.rememberPassword")),1)]),_:1},8,["model-value"]),i(k,{style:{marginLeft:"auto"},href:"https://github.com/PBH-BTN/PeerBanHelper/wiki/%E5%A6%82%E4%BD%95%E9%87%8D%E7%BD%AEToken"},{default:l(()=>[b(_(d.$t("login.form.forgetPassword")),1)]),_:1})]),_:1}),i(S,{type:"primary","html-type":"submit",long:"",loading:a.value},{default:l(()=>[b(_(d.$t("login.form.login")),1)]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}}),ql=P({__name:"App",setup(e){const t=N(),n=L(()=>t.status),a=_t(),{t:o,locale:s}=x(),[r,c,d]=Al(),g=L(()=>a.meta.disableAutoUpdate);return(m,p)=>{const f=$a,v=Ta,h=J,k=xe,S=H,y=Pa,C=Na,$=La,T=Ca,M=Ia,U=Aa,V=Sa;return w(),I(V,{locale:u(to)[u(s)]},{default:l(()=>[i(U,null,{default:l(()=>[i(f,null,{default:l(()=>[i(Bl,{"disable-auto-update":g.value},null,8,["disable-auto-update"])]),_:1}),n.value==="needLogin"?(w(),I(v,{key:0,class:"login-page"},{default:l(()=>[i(Dl,{style:{width:"100%","max-width":"1200px",margin:"auto"}})]),_:1})):(w(),I(v,{key:1},{default:l(()=>[i(S,{direction:"vertical",fill:"",style:{width:"100%","max-width":"1200px",margin:"auto"}},{default:l(()=>[i($,{"active-key":u(c),onChange:u(d),size:"large",animation:!0,"destroy-on-hide":!0,"lazy-load":!0},{default:l(()=>[(w(!0),E(he,null,ht(u(r),F=>{var K;return w(),I(C,{key:F.name,title:u(o)(String((K=F.meta)==null?void 0:K.label))},{default:l(()=>{var Y,Z,ae;return[(Y=F.meta)!=null&&Y.moduleRequire&&!u(er)(u(t).serverManifest,String((Z=F.meta)==null?void 0:Z.moduleRequire))?(w(),I(y,{key:0,status:"error",title:u(o)("router.moduleNotEnable",{moduleName:u(o)(String((ae=F.meta)==null?void 0:ae.label))})},{subtitle:l(()=>[i(h,{style:{"font-size":"0.8rem"}},{default:l(()=>[b(_(u(o)("router.moduleNotEnable.tips")),1)]),_:1})]),extra:l(()=>[i(S,null,{default:l(()=>{var z;return[i(k,{href:String((z=F.meta)==null?void 0:z.documentation),type:"primary"},{default:l(()=>[b(_(u(o)("router.moduleNotEnable.viewDoc")),1)]),_:2},1032,["href"])]}),_:2},1024)]),_:2},1032,["title"])):(w(),I(Wn(F.component),{key:1}))]}),_:2},1032,["title"])}),128))]),_:1},8,["active-key","onChange"]),i(T)]),_:1})]),_:1})),i(M,null,{default:l(()=>[i(Ul)]),_:1})]),_:1})]),_:1},8,["locale"])}}}),Hl=se(ql,[["__scopeId","data-v-c0d6f42c"]]),Oe=Kn(Hl);W._context=Oe._context;Gn({loadingDelay:400,loadingKeep:1e3,pollingWhenOffline:!0});Oe.use(Jn());Oe.use(eo);Oe.use(Il);Oe.mount("#app");
