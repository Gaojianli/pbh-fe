import{_,d as S,R as J,g as P,c as i,U as R,V as z,l as s,n as d,P as c,p,W as k,q as I,u as C,v as g,D as w,s as W,i as Q,e as M,F as N,X,t as ce,Y as ue,Z as O,E as m,$ as B,a0 as A,w as de,x as pe,z as Y,a1 as me,r as fe,y as he,a2 as ge,C as V,f as h,H as b,I as x,a3 as ke,K as ye,Q as ve}from"./index-CRM44dgu.js";import"./index-B-xhAn_4.js";import{T as $e}from"./index-iovgbopl.js";import{f as E,I as we,a as Se}from"./file-DZt7VAuG.js";var be=Object.defineProperty,K=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,q=(e,t,n)=>t in e?be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_e=(e,t)=>{for(var n in t||(t={}))Ce.call(t,n)&&q(e,n,t[n]);if(K)for(var n of K(t))ze.call(t,n)&&q(e,n,t[n]);return e};const Pe={small:3,medium:4,large:8},Ie=e=>{if(e)return Q(e)?{backgroundImage:`linear-gradient(to right, ${Object.keys(e).map(n=>`${e[n]} ${n}`).join(",")})`}:{backgroundColor:e}},We=S({name:"ProgressLine",components:{IconExclamationCircleFill:J},props:{percent:{type:Number,default:0},animation:{type:Boolean,default:!1},size:{type:String,default:"medium"},strokeWidth:{type:Number,default:4},width:{type:[Number,String],default:"100%"},color:{type:[String,Object],default:void 0},trackColor:String,formatText:{type:Function,default:void 0},status:{type:String},showText:Boolean},setup(e){const t=P("progress-line"),n=i(()=>e.strokeWidth!==4?e.strokeWidth:Pe[e.size]),o=i(()=>`${R.times(e.percent,100)}%`),a=i(()=>({width:e.width,height:`${n.value}px`,backgroundColor:e.trackColor})),l=i(()=>_e({width:`${e.percent*100}%`},Ie(e.color)));return{prefixCls:t,style:a,barStyle:l,text:o}}}),Ne=["aria-valuenow"];function Le(e,t,n,o,a,l){const r=z("icon-exclamation-circle-fill");return s(),d("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:p(`${e.prefixCls}-wrapper`)},[c("div",{class:p(e.prefixCls),style:k(e.style)},[c("div",{class:p(`${e.prefixCls}-bar-buffer`)},null,2),c("div",{class:p([`${e.prefixCls}-bar`]),style:k(e.barStyle)},null,6)],6),e.showText?(s(),d("div",{key:0,class:p(`${e.prefixCls}-text`)},[I(e.$slots,"text",{percent:e.percent},()=>[C(g(e.text)+" ",1),e.status==="danger"?(s(),w(r,{key:0})):W("v-if",!0)])],2)):W("v-if",!0)],10,Ne)}var je=_(We,[["render",Le]]);const Te=S({name:"IconExclamation",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=P("icon"),o=i(()=>[n,`${n}-exclamation`,{[`${n}-spin`]:e.spin}]),a=i(()=>{const r={};return e.size&&(r.fontSize=M(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:a,onClick:r=>{t("click",r)}}}}),Oe=["stroke-width","stroke-linecap","stroke-linejoin"],Be=c("path",{d:"M23 9h2v21h-2z"},null,-1),Ae=c("path",{fill:"currentColor",stroke:"none",d:"M23 9h2v21h-2z"},null,-1),Ee=c("path",{d:"M23 37h2v2h-2z"},null,-1),De=c("path",{fill:"currentColor",stroke:"none",d:"M23 37h2v2h-2z"},null,-1),Ue=[Be,Ae,Ee,De];function Fe(e,t,n,o,a,l){return s(),d("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:p(e.cls),style:k(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Ue,14,Oe)}var D=_(Te,[["render",Fe]]);const Ge=Object.assign(D,{install:(e,t)=>{var n;const o=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(o+D.name,D)}}),Re=S({name:"IconCheck",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=P("icon"),o=i(()=>[n,`${n}-check`,{[`${n}-spin`]:e.spin}]),a=i(()=>{const r={};return e.size&&(r.fontSize=M(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:a,onClick:r=>{t("click",r)}}}}),Me=["stroke-width","stroke-linecap","stroke-linejoin"],He=c("path",{d:"M41.678 11.05 19.05 33.678 6.322 20.95"},null,-1),Ve=[He];function Ke(e,t,n,o,a,l){return s(),d("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:p(e.cls),style:k(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Ve,14,Me)}var U=_(Re,[["render",Ke]]);const qe=Object.assign(U,{install:(e,t)=>{var n;const o=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(o+U.name,U)}});let Z=0;const Ze={mini:16,small:48,medium:64,large:80},Je={mini:4,small:3,medium:4,large:4},Qe=S({name:"ProgressCircle",components:{IconExclamation:Ge,IconCheck:qe},props:{percent:{type:Number,default:0},type:{type:String},size:{type:String,default:"medium"},strokeWidth:{type:Number},width:{type:Number,default:void 0},color:{type:[String,Object],default:void 0},trackColor:String,status:{type:String,default:void 0},showText:{type:Boolean,default:!0},pathStrokeWidth:{type:Number}},setup(e){const t=P("progress-circle"),n=Q(e.color),o=i(()=>{var v;return(v=e.width)!=null?v:Ze[e.size]}),a=i(()=>{var v;return(v=e.strokeWidth)!=null?v:e.size==="mini"?o.value/2:Je[e.size]}),l=i(()=>{var v;return(v=e.pathStrokeWidth)!=null?v:e.size==="mini"?a.value:Math.max(2,a.value-2)}),r=i(()=>(o.value-a.value)/2),y=i(()=>Math.PI*2*r.value),f=i(()=>o.value/2),$=i(()=>(Z+=1,`${t}-linear-gradient-${Z}`)),L=i(()=>`${R.times(e.percent,100)}%`);return{prefixCls:t,isLinearGradient:n,radius:r,text:L,perimeter:y,center:f,mergedWidth:o,mergedStrokeWidth:a,mergedPathStrokeWidth:l,linearGradientId:$}}}),Xe=["aria-valuenow"],Ye=["viewBox"],xe={key:0},et=["id"],tt=["offset","stop-color"],nt=["cx","cy","r","stroke-width"],rt=["cx","cy","r","stroke-width"];function ot(e,t,n,o,a,l){const r=z("icon-check"),y=z("icon-exclamation");return s(),d("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:p(`${e.prefixCls}-wrapper`),style:k({width:`${e.mergedWidth}px`,height:`${e.mergedWidth}px`})},[e.type==="circle"&&e.size==="mini"&&e.status==="success"?(s(),w(r,{key:0,style:k({fontSize:e.mergedWidth-2,color:e.color})},null,8,["style"])):(s(),d("svg",{key:1,viewBox:`0 0 ${e.mergedWidth} ${e.mergedWidth}`,class:p(`${e.prefixCls}-svg`)},[e.isLinearGradient?(s(),d("defs",xe,[c("linearGradient",{id:e.linearGradientId,x1:"0",y1:"1",x2:"0",y2:"0"},[(s(!0),d(N,null,X(Object.keys(e.color),f=>(s(),d("stop",{key:f,offset:f,"stop-color":e.color[f]},null,8,tt))),128))],8,et)])):W("v-if",!0),c("circle",{class:p(`${e.prefixCls}-bg`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedPathStrokeWidth,style:k({stroke:e.trackColor})},null,14,nt),c("circle",{class:p(`${e.prefixCls}-bar`),fill:"none",cx:e.center,cy:e.center,r:e.radius,"stroke-width":e.mergedStrokeWidth,style:k({stroke:e.isLinearGradient?`url(#${e.linearGradientId})`:e.color,strokeDasharray:e.perimeter,strokeDashoffset:(e.percent>=1?0:1-e.percent)*e.perimeter})},null,14,rt)],10,Ye)),e.showText&&e.size!=="mini"?(s(),d("div",{key:2,class:p(`${e.prefixCls}-text`)},[I(e.$slots,"text",{percent:e.percent},()=>[e.status==="danger"?(s(),w(y,{key:0})):e.status==="success"?(s(),w(r,{key:1})):(s(),d(N,{key:2},[C(g(e.text),1)],2112))])],2)):W("v-if",!0)],14,Xe)}var st=_(Qe,[["render",ot]]);const it=S({name:"ProgressSteps",components:{IconExclamationCircleFill:J},props:{steps:{type:Number,default:0},percent:{type:Number,default:0},size:{type:String},color:{type:[String,Object],default:void 0},trackColor:String,strokeWidth:{type:Number},status:{type:String,default:void 0},showText:{type:Boolean,default:!0}},setup(e){const t=P("progress-steps"),n=i(()=>{var l;return((l=e.strokeWidth)!=null?l:e.size==="small")?8:4}),o=i(()=>[...Array(e.steps)].map((l,r)=>e.percent>0&&e.percent>1/e.steps*r)),a=i(()=>`${R.times(e.percent,100)}%`);return{prefixCls:t,stepList:o,mergedStrokeWidth:n,text:a}}}),at=["aria-valuenow"];function lt(e,t,n,o,a,l){const r=z("icon-exclamation-circle-fill");return s(),d("div",{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":e.percent,class:p(`${e.prefixCls}-wrapper`)},[c("div",{class:p(e.prefixCls),style:k({height:`${e.mergedStrokeWidth}px`})},[(s(!0),d(N,null,X(e.stepList,(y,f)=>(s(),d("div",{key:f,class:p([`${e.prefixCls}-item`,{[`${e.prefixCls}-item-active`]:y}]),style:k({backgroundColor:y?e.color:e.trackColor})},null,6))),128))],6),e.showText?(s(),d("div",{key:0,class:p(`${e.prefixCls}-text`)},[I(e.$slots,"text",{percent:e.percent},()=>[C(g(e.text)+" ",1),e.status==="danger"?(s(),w(r,{key:0})):W("v-if",!0)])],2)):W("v-if",!0)],10,at)}var ct=_(it,[["render",lt]]);const ut=S({name:"Progress",components:{ProgressLine:je,ProgressCircle:st,ProgressSteps:ct},props:{type:{type:String,default:"line"},size:{type:String},percent:{type:Number,default:0},steps:{type:Number,default:0},animation:{type:Boolean,default:!1},strokeWidth:{type:Number},width:{type:[Number,String]},color:{type:[String,Object]},trackColor:String,bufferColor:{type:[String,Object]},showText:{type:Boolean,default:!0},status:{type:String}},setup(e){const t=P("progress"),{size:n}=ce(e),o=i(()=>e.steps>0?"steps":e.type),a=i(()=>e.status||(e.percent>=1?"success":"normal")),{mergedSize:l}=ue(n);return{cls:i(()=>[t,`${t}-type-${o.value}`,`${t}-size-${l.value}`,`${t}-status-${a.value}`]),computedStatus:a,mergedSize:l}}});function dt(e,t,n,o,a,l){const r=z("progress-steps"),y=z("progress-line"),f=z("progress-circle");return s(),d("div",{class:p(e.cls)},[e.steps>0?(s(),w(r,{key:0,"stroke-width":e.strokeWidth,percent:e.percent,color:e.color,"track-color":e.trackColor,width:e.width,steps:e.steps,size:e.mergedSize,"show-text":e.showText},O({_:2},[e.$slots.text?{name:"text",fn:m($=>[I(e.$slots,"text",B(A($)))])}:void 0]),1032,["stroke-width","percent","color","track-color","width","steps","size","show-text"])):e.type==="line"&&e.mergedSize!=="mini"?(s(),w(y,{key:1,"stroke-width":e.strokeWidth,animation:e.animation,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"buffer-color":e.bufferColor,width:e.width,"show-text":e.showText,status:e.computedStatus},O({_:2},[e.$slots.text?{name:"text",fn:m($=>[I(e.$slots,"text",B(A($)))])}:void 0]),1032,["stroke-width","animation","percent","color","track-color","size","buffer-color","width","show-text","status"])):(s(),w(f,{key:2,type:e.type,"stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,"path-stroke-width":e.type==="line"?e.strokeWidth||4:e.strokeWidth,width:e.width,percent:e.percent,color:e.color,"track-color":e.trackColor,size:e.mergedSize,"show-text":e.showText,status:e.computedStatus},O({_:2},[e.$slots.text?{name:"text",fn:m($=>[I(e.$slots,"text",B(A($)))])}:void 0]),1032,["type","stroke-width","path-stroke-width","width","percent","color","track-color","size","show-text","status"]))],2)}var F=_(ut,[["render",dt]]);const pt=Object.assign(F,{install:(e,t)=>{de(e,t);const n=pe(t);e.component(n+F.name,F)}}),mt=S({name:"IconInfoCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const n=P("icon"),o=i(()=>[n,`${n}-info-circle`,{[`${n}-spin`]:e.spin}]),a=i(()=>{const r={};return e.size&&(r.fontSize=M(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:o,innerStyle:a,onClick:r=>{t("click",r)}}}}),ft=["stroke-width","stroke-linecap","stroke-linejoin"],ht=c("path",{d:"M24 20v14m0-16v-4m18 10c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),gt=[ht];function kt(e,t,n,o,a,l){return s(),d("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:p(e.cls),style:k(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},gt,14,ft)}var G=_(mt,[["render",kt]]);const yt=Object.assign(G,{install:(e,t)=>{var n;const o=(n=t==null?void 0:t.iconPrefix)!=null?n:"";e.component(o+G.name,G)}});function vt(e){const{endpoint:t}=Y(),n=new URL(me(t,"api/banlogs"),location.href);return n.searchParams.set("pageIndex",String(e.pageIndex-1)),e.pageSize&&n.searchParams.set("pageSize",String(e.pageSize)),fetch(n).then(o=>o.json()).then(o=>({...o,pageIndex:o.pageIndex+1}))}const $t=S({__name:"banlogTable",setup(e){const t=fe(!0),n=he(),o=Y(),{data:a,total:l,current:r,loading:y,pageSize:f,changeCurrent:$,changePageSize:L,refresh:v}=ge(vt,{defaultParams:[{pageIndex:1,pageSize:10}],pagination:{currentKey:"pageIndex",pageSizeKey:"pageSize",totalKey:"total"},pollingInterval:i(()=>n.pollingInterval),onSuccess:n.renewLastUpdate,onAfter:()=>{t.value=!1}});V([f,r],()=>{t.value=!0}),V(()=>o.endpoint,v,{immediate:!0});const ee=i(()=>t.value||y.value||!H.value),te=[{title:"封禁时间",slotName:"banAt",width:175},{title:"解封时间",slotName:"unbanAt",width:175},{title:"Peer 地址",slotName:"peerAddress",width:230},{title:"Peer Id",slotName:"peerId",width:120},{title:"流量快照",slotName:"peerStatus",width:150},{title:"种子名",dataIndex:"torrentName",ellipsis:!0,tooltip:!0},{title:"大小",slotName:"torrentSize",width:120},{title:"描述",dataIndex:"description",ellipsis:!0,tooltip:!0}],H=i(()=>{var j;return(j=a.value)==null?void 0:j.results});return(j,St)=>{const ne=x,re=we,oe=Se,se=pt,T=ke,ie=ye,ae=yt,le=$e;return s(),w(le,{stripe:!0,columns:te,data:H.value,loading:ee.value,pagination:{total:b(l),current:b(r),pageSize:b(f),showPageSize:!0},onPageChange:b($),onPageSizeChange:b(L)},{banAt:m(({record:u})=>[c("p",null,g(new Date(u.banAt).toLocaleString("zh-cn")),1)]),unbanAt:m(({record:u})=>[c("p",null,g(u.unbanAt?new Date(u.unbanAt).toLocaleString("zh-cn"):"未解封"),1)]),peerAddress:m(({record:u})=>[h(ne,{copyable:"",code:""},{default:m(()=>[C(g(u.peerIp)+":"+g(u.peerPort),1)]),_:2},1024)]),peerStatus:m(({record:u})=>[h(ie,{fill:"",style:{"justify-content":"space-between"}},{default:m(()=>[c("div",null,[c("p",null,[C(g(b(E)(u.peerUploaded)),1),h(re,{class:"green"})]),c("p",null,[C(g(b(E)(u.peerDownloaded)),1),h(oe,{class:"red"})])]),h(T,{content:(u.peerProgress*100).toFixed(2)+"%"},{default:m(()=>[h(se,{percent:u.peerProgress,size:"mini"},null,8,["percent"])]),_:2},1032,["content"])]),_:2},1024)]),peerId:m(({record:u})=>[c("p",null,[C(g(u.peerId)+" ",1),h(T,{content:u.peerClientName},{default:m(()=>[h(ae)]),_:2},1032,["content"])])]),torrentSize:m(({record:u})=>[h(T,{content:`Hash: ${u.torrentInfoHash}`},{default:m(()=>[c("p",null,g(b(E)(u.torrentSize)),1)]),_:2},1032,["content"])]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])}}}),wt=ve($t,[["__scopeId","data-v-aa89b28b"]]),Pt=S({__name:"LogView",setup(e){return(t,n)=>{const o=x;return s(),d(N,null,[h(o,{style:{"font-size":"1.2em"}},{default:m(()=>[C(" 此页面展示 PeerBanHelper 储存的封禁历史记录信息。 ")]),_:1}),h(wt)],64)}}});export{Pt as default};
