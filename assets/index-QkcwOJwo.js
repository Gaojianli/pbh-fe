import{d as L,c as b,f as _,h as E,n as J,k as F,l as x,Z as tt,_ as je,$ as Ce,r as j,H as ue,a0 as V,a1 as ie,w as Z,v as n,q as o,t as d,u,a2 as i,p as T,F as ae,N as Te,s as le,a3 as at,o as nt,a4 as ot,a5 as st,a6 as lt,a7 as rt,a8 as it,a9 as ct,aa as ut,ab as dt,ac as pt,ad as gt,K as mt,L as _t,M as ht,Y as bt,ae as ft,af as vt}from"./libs-C3-nZtvH.js";import{_ as G,g as Q,i as X,d as yt,l as kt,T as _e,S as St,a as D,b as wt,C as Ee,c as Oe,R as Re,e as Le,f as Pe,I as $t,h as Ct,j as It,k as Y,m as Me,n as Tt,G as Lt,o as Pt,u as Ie,p as Ae,D as De,q as He,L as Mt,E as We,r as Nt,s as zt,t as Fe,P as xt,v as Ne,w as Ut,O as Bt,x as jt,y as Et,z as Ve,A as Ot,M as me,B as Rt,F as At,H as Dt,J as Ht,K as Wt,N as Ft,Q as Vt,U as qt,V as Kt,W as Yt,X as Zt,Y as Jt,Z as Gt,$ as Qt,a0 as Xt,a1 as ea,a2 as ta,a3 as aa,a4 as na}from"./arcoDesign-DERE-0i7.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();const oa=L({name:"IconArrowDown",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-arrow-down`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),sa=["stroke-width","stroke-linecap","stroke-linejoin"],la=x("path",{d:"m11.27 27.728 12.727 12.728 12.728-12.728M24 5v34.295"},null,-1),ra=[la];function ia(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},ra,14,sa)}var he=G(oa,[["render",ia]]);const qe=Object.assign(he,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+he.name,he)}}),ca=L({name:"IconArrowUp",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-arrow-up`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),ua=["stroke-width","stroke-linecap","stroke-linejoin"],da=x("path",{d:"M11.27 20.272 23.997 7.544l12.728 12.728M24 43V8.705"},null,-1),pa=[da];function ga(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},pa,14,ua)}var be=G(ca,[["render",ga]]);const Ke=Object.assign(be,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+be.name,be)}}),ma=L({name:"IconInfoCircle",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-info-circle`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),_a=["stroke-width","stroke-linecap","stroke-linejoin"],ha=x("path",{d:"M24 20v14m0-16v-4m18 10c0 9.941-8.059 18-18 18S6 33.941 6 24 14.059 6 24 6s18 8.059 18 18Z"},null,-1),ba=[ha];function fa(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},ba,14,_a)}var fe=G(ma,[["render",fa]]);const va=Object.assign(fe,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+fe.name,fe)}}),ya=L({name:"IconStop",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-stop`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),ka=["stroke-width","stroke-linecap","stroke-linejoin"],Sa=x("path",{d:"M36.728 36.728c7.03-7.03 7.03-18.427 0-25.456-7.03-7.03-18.427-7.03-25.456 0m25.456 25.456c-7.03 7.03-18.427 7.03-25.456 0-7.03-7.03-7.03-18.427 0-25.456m25.456 25.456L11.272 11.272"},null,-1),wa=[Sa];function $a(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},wa,14,ka)}var ve=G(ya,[["render",$a]]);const Ca=Object.assign(ve,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+ve.name,ve)}}),Ia=L({name:"IconSettings",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-settings`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),Ta=["stroke-width","stroke-linecap","stroke-linejoin"],La=x("path",{d:"M18.797 6.732A1 1 0 0 1 19.76 6h8.48a1 1 0 0 1 .964.732l1.285 4.628a1 1 0 0 0 1.213.7l4.651-1.2a1 1 0 0 1 1.116.468l4.24 7.344a1 1 0 0 1-.153 1.2L38.193 23.3a1 1 0 0 0 0 1.402l3.364 3.427a1 1 0 0 1 .153 1.2l-4.24 7.344a1 1 0 0 1-1.116.468l-4.65-1.2a1 1 0 0 0-1.214.7l-1.285 4.628a1 1 0 0 1-.964.732h-8.48a1 1 0 0 1-.963-.732L17.51 36.64a1 1 0 0 0-1.213-.7l-4.65 1.2a1 1 0 0 1-1.116-.468l-4.24-7.344a1 1 0 0 1 .153-1.2L9.809 24.7a1 1 0 0 0 0-1.402l-3.364-3.427a1 1 0 0 1-.153-1.2l4.24-7.344a1 1 0 0 1 1.116-.468l4.65 1.2a1 1 0 0 0 1.213-.7l1.286-4.628Z"},null,-1),Pa=x("path",{d:"M30 24a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"},null,-1),Ma=[La,Pa];function Na(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Ma,14,Ta)}var ye=G(Ia,[["render",Na]]);const za=Object.assign(ye,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+ye.name,ye)}}),xa=L({name:"IconMoonFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-moon-fill`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),Ua=["stroke-width","stroke-linecap","stroke-linejoin"],Ba=x("path",{d:"M42.108 29.769c.124-.387-.258-.736-.645-.613A17.99 17.99 0 0 1 36 30c-9.941 0-18-8.059-18-18 0-1.904.296-3.74.844-5.463.123-.387-.226-.768-.613-.645C10.558 8.334 5 15.518 5 24c0 10.493 8.507 19 19 19 8.482 0 15.666-5.558 18.108-13.231Z",fill:"currentColor",stroke:"none"},null,-1),ja=[Ba];function Ea(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},ja,14,Ua)}var ke=G(xa,[["render",Ea]]);const Oa=Object.assign(ke,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+ke.name,ke)}}),Ra=L({name:"IconSunFill",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-sun-fill`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),Aa=["stroke-width","stroke-linecap","stroke-linejoin"],Da=x("circle",{cx:"24",cy:"24",r:"9",fill:"currentColor",stroke:"none"},null,-1),Ha=x("path",{d:"M21 5.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5ZM21 37.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5ZM42.5 21a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5h5ZM10.5 21a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5h5ZM39.203 34.96a.5.5 0 0 1 0 .707l-3.536 3.536a.5.5 0 0 1-.707 0l-3.535-3.536a.5.5 0 0 1 0-.707l3.535-3.535a.5.5 0 0 1 .707 0l3.536 3.535ZM16.575 12.333a.5.5 0 0 1 0 .707l-3.535 3.535a.5.5 0 0 1-.707 0L8.797 13.04a.5.5 0 0 1 0-.707l3.536-3.536a.5.5 0 0 1 .707 0l3.535 3.536ZM13.04 39.203a.5.5 0 0 1-.707 0l-3.536-3.536a.5.5 0 0 1 0-.707l3.536-3.535a.5.5 0 0 1 .707 0l3.536 3.535a.5.5 0 0 1 0 .707l-3.536 3.536ZM35.668 16.575a.5.5 0 0 1-.708 0l-3.535-3.535a.5.5 0 0 1 0-.707l3.535-3.536a.5.5 0 0 1 .708 0l3.535 3.536a.5.5 0 0 1 0 .707l-3.535 3.535Z",fill:"currentColor",stroke:"none"},null,-1),Wa=[Da,Ha];function Fa(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Wa,14,Aa)}var Se=G(Ra,[["render",Fa]]);const Va=Object.assign(Se,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+Se.name,Se)}}),qa=L({name:"IconLanguage",props:{size:{type:[Number,String]},strokeWidth:{type:Number,default:4},strokeLinecap:{type:String,default:"butt",validator:e=>["butt","round","square"].includes(e)},strokeLinejoin:{type:String,default:"miter",validator:e=>["arcs","bevel","miter","miter-clip","round"].includes(e)},rotate:Number,spin:Boolean},emits:{click:e=>!0},setup(e,{emit:t}){const a=Q("icon"),l=b(()=>[a,`${a}-language`,{[`${a}-spin`]:e.spin}]),s=b(()=>{const r={};return e.size&&(r.fontSize=X(e.size)?`${e.size}px`:e.size),e.rotate&&(r.transform=`rotate(${e.rotate}deg)`),r});return{cls:l,innerStyle:s,onClick:r=>{t("click",r)}}}}),Ka=["stroke-width","stroke-linecap","stroke-linejoin"],Ya=x("path",{d:"m42 43-2.385-6M26 43l2.384-6m11.231 0-.795-2-4.18-10h-1.28l-4.181 10-.795 2m11.231 0h-11.23M17 5l1 5M5 11h26M11 11s1.889 7.826 6.611 12.174C22.333 27.522 30 31 30 31"},null,-1),Za=x("path",{d:"M25 11s-1.889 7.826-6.611 12.174C13.667 27.522 6 31 6 31"},null,-1),Ja=[Ya,Za];function Ga(e,t,a,l,s,c){return _(),E("svg",{viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",class:J(e.cls),style:F(e.innerStyle),"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin,onClick:t[0]||(t[0]=(...r)=>e.onClick&&e.onClick(...r))},Ja,14,Ka)}var we=G(qa,[["render",Ga]]);const Qa=Object.assign(we,{install:(e,t)=>{var a;const l=(a=t==null?void 0:t.iconPrefix)!=null?a:"";e.component(l+we.name,we)}});function Xa(e){var t=[];if(e.length===0)return"";if(typeof e[0]!="string")throw new TypeError("Url must be a string. Received "+e[0]);if(e[0].match(/^[^/:]+:\/*$/)&&e.length>1){var a=e.shift();e[0]=a+e[0]}e[0].match(/^file:\/\/\//)?e[0]=e[0].replace(/^([^/:]+):\/*/,"$1:///"):e[0]=e[0].replace(/^([^/:]+):\/*/,"$1://");for(var l=0;l<e.length;l++){var s=e[l];if(typeof s!="string")throw new TypeError("Url must be a string. Received "+s);s!==""&&(l>0&&(s=s.replace(/^[\/]+/,"")),l<e.length-1?s=s.replace(/[\/]+$/,""):s=s.replace(/[\/]+$/,"/"),t.push(s))}var c=t.join("/");c=c.replace(/\/(\?|&|#[^!])/g,"$1");var r=c.split("?");return c=r.shift()+(r.length>0?"?":"")+r.join("&"),c}function ne(){var e;return typeof arguments[0]=="object"?e=arguments[0]:e=[].slice.call(arguments),Xa(e)}const de={formatYear:"YYYY",formatMonth:"MMM YYYY",today:"Today",view:{month:"Month",year:"Year",week:"Week",day:"Day"},month:{long:{January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December"},short:{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sept",October:"Oct",November:"Nov",December:"Dec"}},week:{long:{self:"Week",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},short:{self:"Week",monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"}}},en={locale:"en-US",empty:{description:"No Data"},drawer:{okText:"Ok",cancelText:"Cancel"},popconfirm:{okText:"Ok",cancelText:"Cancel"},modal:{okText:"Ok",cancelText:"Cancel"},pagination:{goto:"Goto",page:"Page",countPerPage:" / Page",total:"Total: {0}"},table:{okText:"Ok",resetText:"Reset"},upload:{start:"Start",cancel:"Cancel",delete:"Delete",retry:"Click to retry",buttonText:"Upload",preview:"Preview",drag:"Click or drag file to this area to upload",dragHover:"Release to upload",error:"Upload Error"},calendar:de,datePicker:{view:de.view,month:de.month,week:de.week,placeholder:{date:"Please select date",week:"Please select week",month:"Please select month",year:"Please select year",quarter:"Please select quarter",time:"Please select time"},rangePlaceholder:{date:["Start date","End date"],week:["Start week","End week"],month:["Start month","End month"],year:["Start year","End year"],quarter:["Start quarter","End quarter"],time:["Start time","End time"]},selectTime:"Select time",today:"Today",now:"Now",ok:"Ok"},image:{loading:"loading"},imagePreview:{fullScreen:"Full Screen",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",zoomIn:"Zoom In",zoomOut:"Zoom Out",originalSize:"Original Size"},typography:{copied:"Copied",copy:"Copy",expand:"Expand",collapse:"Collapse",edit:"Edit"},form:{validateMessages:yt},colorPicker:{history:"History Colors",preset:"Preset Colors",empty:"Empty"}},tn={"settings.navbar.theme.toLight":"Click to use light mode","settings.navbar.theme.toDark":"Click to use dark mode","settings.language":"Language","settings.modal.title":"Settings","settings.modal.endpointTips":"If you can't access the backend of the PBH, you can try to set the Endpoint here","settings.modal.pollInterval":"Polling interval:","settings.endpoint.error":"Cannot connect to the backend, please check the Endpoint settings"},an={"page.dashboard.description":"This page displays the basic data since PeerBanHelper started.","page.dashboard.clientStatus.title":"Connected Downloaders","page.dashboard.clientStatus.card.title":"Downloader Status","page.dashboard.clientStatus.card.status":"Status","page.dashboard.clientStatus.card.status.normal":"Normal - Status is good","page.dashboard.clientStatus.card.status.error":"Error - Error occurred when communicating with the client, please check the log file","page.dashboard.clientStatus.card.status.unknown":"Unknown - PeerBanHelper may not have communicated with this client yet","page.dashboard.clientStatus.card.status.torrentNumber":"Active Torrents:","page.dashboard.clientStatus.card.status.peerNumber":"Connected Peers:","page.dashboard.statics.currentStatus":"Current Status","page.dashboard.statics.checked":"Total checked","page.dashboard.statics.times":"times","page.dashboard.statics.banPeer":"Ban Peers","page.dashboard.statics.unbanPeer":"Unban Peers","page.dashboard.statics.currentBan":"Currently banned Peers","page.dashboard.statics.number":""},nn={"page.banlist.banlist":"Ban List","page.banlist.banlist.description":"Following is the ban list (sorted by time descending)","page.banlist.banlist.searchPlaceHolder":"Search an IP address","page.banlist.banlist.listItem.reserveDNSLookup":"Reverse DNS Lookup","page.banlist.banlist.listItem.banTime":"Ban Time","page.banlist.banlist.listItem.expireTime":"Estimated Unban Time","page.banlist.banlist.listItem.location":"Location","page.banlist.banlist.listItem.snapshot":"Snapshot","page.banlist.banlist.listItem.reason":"Ban Reason","page.banlist.banlist.bottomReached":"No more data!"},on={"page.banlog.description":"This page shows the ban log information stored by PeerBanHelper.","page.banlog.banlogTable.notUnbanned":"Not Unbanned yet","page.banlog.banlogTable.column.banTime":"Ban Time","page.banlog.banlogTable.column.unbanTime":"Unban Time","page.banlog.banlogTable.column.peerAddress":"Peer Address","page.banlog.banlogTable.column.peerId":"Peer ID","page.banlog.banlogTable.column.trafficSnapshot":"Traffic Snapshot","page.banlog.banlogTable.column.torrentName":"Torrent Name","page.banlog.banlogTable.column.torrentSize":"Size","page.banlog.banlogTable.column.description":"Description"},sn={"page.topban.description":"This page shows the ban history stored by PeerBanHelper.","page.topban.title":"Top {topNumber} most frequently banned IP addresses","page.topban.usage":"This data is analyzed from the ban history recorded in the database in the past 14 days. If some IP addresses are repeatedly banned, you may consider using the system firewall to block these IPs, or share these malicious IP addresses with others to help more people improve their blocking rules.","page.topban.onlyShow":"Only show the first","page.topban.onlyShow.number":"","page.topban.top50Table.searchPlaceholder":"Search IP address...","page.topban.top50Table.column.ipaddress":"IP Address","page.topban.top50Table.column.historyCount":"History Ban Count"},ln={"page.ruleMetrices.title":"Rule metrics","page.ruleMetrices.description":"The following is the rule statistics information, you can improve your rule through following information.","page.ruleMetrices.metricsTable.filter":"Show hit rules only","page.ruleMetrices.metricsTable.column.type":"Rule Type","page.ruleMetrices.metricsTable.column.run":"Run Times","page.ruleMetrices.metricsTable.column.hit":"Hit Times"},rn={"service.version.networkError":"Network failure, unable to initiate request","service.version.parseError":"Unable to parse the data, please check whether the endpoint is correct","service.version.formatError":"The response format is incorrect, please check the backend version"},cn={"navbar.action.locale":"Switch to English","navbar.action.autoUpdate":"Auto Update","navbar.action.autoUpdate.lastUpdate":"Last updated at: ","main.workInProgressTips":"This feature is still working in progress, and the data currently recorded and displayed is relatively limited","router.dashboard":"Status","router.banlist":"Ban List","router.banlogs":"Ban Logs","router.topban":"Top Bans","router.ruleMetrics":"Rule Metrics",...tn,...an,...nn,...on,...sn,...ln,...rn},un={"settings.navbar.theme.toLight":"点击切换为亮色模式","settings.navbar.theme.toDark":"点击切换为暗黑模式","settings.language":"语言","settings.modal.title":"设置","settings.modal.endpointTips":"如果你无法访问PBH后端，可以尝试在此设置Endpoint","settings.modal.pollInterval":"轮询间隔：","settings.endpoint.error":"无法连接到后端，请检查Endpoint设置"},dn={"page.dashboard.description":"此页面展示 PeerBanHelper 自启动以来的基本数据。","page.dashboard.clientStatus.title":"已连接的下载器","page.dashboard.clientStatus.card.title":"下载器状态","page.dashboard.clientStatus.card.status":"状态","page.dashboard.clientStatus.card.status.normal":"正常 - 状态良好","page.dashboard.clientStatus.card.status.error":"错误 - 与客户端通信时出错，请检查日志文件","page.dashboard.clientStatus.card.status.unknown":"未知 - PeerBanHelper 可能还没有与此客户端通信","page.dashboard.clientStatus.card.status.torrentNumber":"活动种子数:","page.dashboard.clientStatus.card.status.peerNumber":"已连接的Peers:","page.dashboard.statics.currentStatus":"当前状态","page.dashboard.statics.checked":"共检查","page.dashboard.statics.times":"次","page.dashboard.statics.banPeer":"封禁Peer","page.dashboard.statics.unbanPeer":"解除已到期的封禁","page.dashboard.statics.currentBan":"当前处于封禁状态Peer","page.dashboard.statics.number":"个"},pn={"page.banlist.banlist":"封禁名单","page.banlist.banlist.description":"以下是封禁列表（按时间倒序排列）","page.banlist.banlist.searchPlaceHolder":"搜索 IP 地址","page.banlist.banlist.listItem.reserveDNSLookup":"反向 DNS 解析","page.banlist.banlist.listItem.banTime":"封禁时间","page.banlist.banlist.listItem.expireTime":"预计解封时间","page.banlist.banlist.listItem.location":"发现位置","page.banlist.banlist.listItem.snapshot":"封禁快照","page.banlist.banlist.listItem.reason":"封禁原因","page.banlist.banlist.bottomReached":"已经到底啦！"},gn={"page.banlog.description":" 此页面展示 PeerBanHelper 储存的封禁历史记录信息。","page.banlog.banlogTable.notUnbanned":"未解封","page.banlog.banlogTable.column.banTime":"封禁时间","page.banlog.banlogTable.column.unbanTime":"解封时间","page.banlog.banlogTable.column.peerAddress":"Peer 地址","page.banlog.banlogTable.column.peerId":"Peer ID","page.banlog.banlogTable.column.trafficSnapshot":"流量快照","page.banlog.banlogTable.column.torrentName":"种子名","page.banlog.banlogTable.column.torrentSize":"大小","page.banlog.banlogTable.column.description":"描述"},mn={"page.topban.description":"此页面展示 PeerBanHelper 储存的封禁历史记录信息。","page.topban.title":"被封禁频率最高的{topNumber}个 IP 地址","page.topban.usage":"这是从数据库中记录的近14天的封禁历史中分析得来的数据。如果某些 IP 地址持续被多次封禁，则可以考虑使用系统防火墙屏蔽这些 IP，或者向其他人分享这些恶意 IP 地址，以帮助更多人改善他们的屏蔽规则。","page.topban.onlyShow":"只展示前","page.topban.onlyShow.number":"个","page.topban.top50Table.searchPlaceholder":"搜索IP地址...","page.topban.top50Table.column.ipaddress":"IP 地址","page.topban.top50Table.column.historyCount":"历史封禁次数"},_n={"page.ruleMetrices.title":"规则统计","page.ruleMetrices.description":"以下是规则统计信息，你可以通过规则命中次数（封禁次数）和运行次数来评估规则的有效性。","page.ruleMetrices.metricsTable.filter":"仅显示命中过的规则","page.ruleMetrices.metricsTable.column.type":"规则类型","page.ruleMetrices.metricsTable.column.run":"运行次数","page.ruleMetrices.metricsTable.column.hit":"命中次数"},hn={"service.version.networkError":"网络故障，无法发起请求","service.version.parseError":"无法解析接口返回数据，请检查服务地址是否正确","service.version.formatError":"后端接口响应格式错误，请检查后端版本"},bn={"navbar.action.locale":"切换为中文","navbar.action.autoUpdate":"自动刷新","navbar.action.autoUpdate.lastUpdate":"最后更新于：","main.workInProgressTips":"请注意，此功能仍在施工中，目前记录和展示的数据较为有限。","router.dashboard":"状态","router.banlist":"封禁名单","router.banlogs":"封禁日志","router.topban":"最多封禁","router.ruleMetrics":"规则统计",...un,...dn,...pn,...gn,...mn,..._n,...hn},fn=[{label:"中文",value:"zh-CN"},{label:"English",value:"en-US"}];function Ye(){return navigator.language.includes("zh")?"zh-CN":"en-US"}const xe={short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},longlong:{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}},vn=tt({locale:Ye(),fallbackLocale:"en-US",legacy:!1,messages:{"en-US":cn,"zh-CN":bn},datetimeFormats:{"en-US":xe,"zh-CN":xe}}),yn={"en-US":en,"zh-CN":kt};function oe(){var a;const e=((a=document.querySelector("html"))==null?void 0:a.getAttribute("lang"))||Ye(),t=new Headers;return t.set("Accept-Language",e),t}class pe extends Error{constructor(t,a=!0){super(t),this.isApiWrong=a}}function kn(e=O().endpoint){const t=new URL(ne(e,"api/version"),location.href);return fetch(t,{headers:oe()}).catch(()=>{throw new pe("service.version.networkError",!1)}).then(a=>a.json().catch(()=>{throw new pe("service.version.parseError")})).then(a=>{if(!a.version)throw new pe("service.version.formatError");return a})}function Ue(){let e;const t=new Promise(a=>e=a);return Object.assign(t,{resolve:e})}const O=je("endpoint",()=>{const e=Ce("endpoint",""),t=j(Ue()),a=j(),l=j("checking"),s=j(null),c=async r=>{l.value="checking",e.value=r;const h=Ue();t.value.resolve(h),t.value=h;try{return a.value=await kn(r),t.value.resolve(),s.value=null,l.value="pass",!0}catch(p){return s.value=p,l.value="fail",!1}};return c(e.value),{endpoint:ue(e),serverAvailable:ue(t),serverVersion:ue(a),loading:b(()=>l.value==="checking"),error:ue(s),setEndpoint:c}});async function Sn(){const e=O();await e.serverAvailable;const t=new URL(ne(e.endpoint,"api/clientStatus"),location.href);return fetch(t,{headers:oe()}).then(a=>a.json())}async function wn(){const e=O();await e.serverAvailable;const t=new URL(ne(e.endpoint,"api/statistic"),location.href);return fetch(t,{headers:oe()}).then(a=>a.json())}var K=(e=>(e.HEALTHY="HEALTHY",e.ERROR="ERROR",e.UNKNOWN="UNKNOWN",e))(K||{});const ee=je("autoUpdate",()=>{const e=j(new Date),t=Ce("autoUpdate.enable",!0),a=Ce("autoUpdate.interval",3e3),l=b(()=>t.value?a.value:-1);function s(){e.value=new Date}return{lastUpdate:e,autoUpdate:t,interval:a,pollingInterval:l,renewLastUpdate:s}}),$n=L({__name:"clientStatus",setup(e){const{t}=V(),a=new Map([[K.HEALTHY,["success","page.dashboard.clientStatus.card.status.normal"]],[K.ERROR,["warning","page.dashboard.clientStatus.card.status.error"]],[K.UNKNOWN,["danger","page.dashboard.clientStatus.card.status.unknown"]]]),l=p=>p===void 0||!a.has(p.status)?a.get(K.UNKNOWN):a.get(p.status),s=ee(),c=O(),{data:r,refresh:h}=ie(Sn,{pollingInterval:b(()=>s.pollingInterval),onSuccess:s.renewLastUpdate,cacheKey:()=>`${c.endpoint}-clientStatus`});return Z(()=>c.endpoint,h),(p,w)=>{const y=_e,f=St,g=D,v=wt,m=Ee,k=Oe,M=Le,S=Pe,U=$t,B=Ct,$=It,N=Y,C=Me,P=Re;return _(),E(ae,null,[n(y,{heading:3},{default:o(()=>[d(u(i(t)("page.dashboard.clientStatus.title")),1)]),_:1}),n(P,{justify:"start",wrap:!0,gutter:[{xs:8,sm:8,md:8,lg:24,xl:32},{xs:8,sm:8,md:8,lg:24,xl:32}]},{default:o(()=>[i(r)?(_(!0),E(ae,{key:1},Te(i(r),I=>(_(),T(k,{xs:24,sm:12,md:8,lg:6,key:I.name},{default:o(()=>[n(m,{title:i(t)("page.dashboard.clientStatus.card.title"),hoverable:""},{default:o(()=>[n(C,null,{default:o(()=>[n(S,{content:I.endpoint},{default:o(()=>[n(M,{style:{"font-size":"2em"}},{default:o(()=>[x("b",null,u(I.name),1)]),_:2},1024)]),_:2},1032,["content"]),n(M,null,{default:o(()=>[d(u(i(t)("page.dashboard.clientStatus.card.status"))+": ",1),n(N,{type:l(I)[0]},{default:o(()=>[I.status==i(K).HEALTHY?(_(),T(U,{key:0})):le("",!0),I.status==i(K).ERROR?(_(),T(B,{key:1})):le("",!0),I.status==i(K).UNKNOWN?(_(),T($,{key:2})):le("",!0),d(" "+u(i(t)(l(I)[1])),1)]),_:2},1032,["type"])]),_:2},1024),n(M,null,{default:o(()=>[d(u(i(t)("page.dashboard.clientStatus.card.status.torrentNumber"))+" "+u(I.torrents),1)]),_:2},1024),n(M,null,{default:o(()=>[d(u(i(t)("page.dashboard.clientStatus.card.status.peerNumber"))+" "+u(I.peers),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024))),128)):(_(),T(k,{key:0,xs:24,sm:12,md:8,lg:6},{default:o(()=>[n(m,{hoverable:""},{default:o(()=>[n(v,{animation:!0},{default:o(()=>[n(g,{direction:"vertical",style:{width:"100%"},size:"large"},{default:o(()=>[n(f),n(f),n(f),n(f)]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1})],64)}}}),Cn=L({__name:"statisticInfo",setup(e){const{t}=V(),a=ee(),l=O(),{data:s,refresh:c}=ie(wn,{pollingInterval:b(()=>a.pollingInterval),onSuccess:a.renewLastUpdate,cacheKey:()=>`${l.endpoint}-statistic`});return Z(()=>l.endpoint,c),(r,h)=>{const p=Y,w=Tt,y=Lt,f=Pt,g=Ee,v=D;return _(),T(v,{direction:"vertical",fill:""},{default:o(()=>[n(g,{title:i(t)("page.dashboard.statics.currentStatus")},{default:o(()=>[n(f,{cols:24,"row-gap":16,class:"panel"},{default:o(()=>[n(y,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:o(()=>{var m,k;return[n(w,{title:i(t)("page.dashboard.statics.checked"),value:(m=i(s))==null?void 0:m.checkCounter,"value-from":(k=i(s))==null?void 0:k.checkCounter,animation:"","show-group-separator":""},{suffix:o(()=>[n(p,null,{default:o(()=>[d(" "+u(i(t)("page.dashboard.statics.times")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1}),n(y,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:o(()=>{var m,k;return[n(w,{title:i(t)("page.dashboard.statics.banPeer"),value:(m=i(s))==null?void 0:m.peerBanCounter,"value-from":(k=i(s))==null?void 0:k.peerBanCounter,animation:"","show-group-separator":""},{suffix:o(()=>[n(p,null,{default:o(()=>[d(" "+u(i(t)("page.dashboard.statics.times")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1}),n(y,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:o(()=>{var m,k;return[n(w,{title:i(t)("page.dashboard.statics.unbanPeer"),value:(m=i(s))==null?void 0:m.peerUnbanCounter,"value-from":(k=i(s))==null?void 0:k.peerUnbanCounter,animation:"","show-group-separator":""},{suffix:o(()=>[n(p,null,{default:o(()=>[d(" "+u(i(t)("page.dashboard.statics.times")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1}),n(y,{class:"panel-col",span:{xs:12,sm:12,md:6}},{default:o(()=>{var m,k;return[n(w,{title:i(t)("page.dashboard.statics.currentBan"),value:(m=i(s))==null?void 0:m.banlistCounter,"value-from":(k=i(s))==null?void 0:k.banlistCounter,animation:"","show-group-separator":""},{suffix:o(()=>[n(p,null,{default:o(()=>[d(" "+u(i(t)("page.dashboard.statics.number")),1)]),_:1})]),_:1},8,["title","value","value-from"])]}),_:1})]),_:1})]),_:1},8,["title"])]),_:1})}}}),In=x("br",null,null,-1),Tn=L({__name:"index",setup(e){return(t,a)=>{const l=Y,s=D;return _(),T(s,{direction:"vertical",fill:""},{default:o(()=>[n(l,{style:{"font-size":"1.2em"}},{default:o(()=>[d(u(t.$t("page.dashboard.description")),1)]),_:1}),n($n),In,n(Cn)]),_:1})}}});async function $e(e,t){const a=O();await a.serverAvailable;const l=new URL(ne(a.endpoint,"api/banlist"),location.href);return l.searchParams.set("limit",String(e)),t&&l.searchParams.set("lastBanTime",String(t)),fetch(l,{headers:oe()}).then(s=>s.json())}function re(e,t=2){if(e===0)return"0 Bytes";const a=1024,l=t<0?0:t,s=["Bytes","KB","MB","GB","TB","PB","EB"],c=Math.floor(Math.log(e)/Math.log(a));return c>=s.length?"Too large":parseFloat((e/Math.pow(a,c)).toFixed(l))+" "+s[c]}const Ln=e=>(ot("data-v-3b0a6a6d"),e=e(),st(),e),Pn=Ln(()=>x("br",null,null,-1)),Mn={key:1,style:{position:"absolute",transform:"translateY(-50%)"}},te=5,Nn=L({__name:"banList",setup(e){const{height:t}=at(),a=j(),l=ee(),s=O(),c=j(!1),r=j(5),h=j(!1),{t:p,d:w}=V();let y=!0;async function f(){var N;if(y||!g.value)return y=!1,$e(te);if(g.value.length>r.value-te){const C=[];let P=!1;for(;C.length<r.value&&!P;){const I=await $e(te,(N=C[C.length-1])==null?void 0:N.banMetadata.banAt);for(const R of I)if(R.banMetadata.randomId!==g.value[0].banMetadata.randomId)C.push(R);else{P=!0;break}}return P?(r.value=g.value.length+C.length,C.concat(g.value)):C}return g.value}const{data:g,refresh:v,run:m}=ie(f,{pollingInterval:b(()=>l.pollingInterval),onSuccess:l.renewLastUpdate,manual:!0}),k=N=>{var C,P;if(N){const I=(C=g.value)==null?void 0:C.map(R=>R.address).findIndex(R=>R.includes(N));I!==-1&&((P=a.value)==null||P.scrollIntoView({index:I,align:"auto"}))}},M=async()=>{var N;if(g.value){if(r.value=g.value.length+te,h.value=!0,c.value=!1,g.value.length<=r.value){const C=[];for(;C.length+g.value.length<r.value&&!c.value;){const P=await $e(te,(N=C[C.length-1]||g.value[g.value.length-1])==null?void 0:N.banMetadata.banAt);P.length<te&&(c.value=!0),C.push(...P)}g.value=g.value.concat(C)}setTimeout(()=>{h.value=!1},c.value?1e3:0)}};Z(()=>s.endpoint,()=>{r.value=te,g.value=void 0,v()}),nt(m);const S=b(()=>g.value??[]),U=Ie(j({xs:0,md:1}),1),B=Ie(j({xs:1500,md:1e3,xl:800}),800),$=b(()=>Math.min(B.value,t.value-200));return(N,C)=>{const P=_e,I=Y,R=Ae,q=D,H=De,A=Ke,z=qe,Ze=He,Je=Mt,Ge=We,Qe=Nt,Xe=zt;return _(),T(q,{direction:"vertical",fill:""},{default:o(()=>[n(P,{heading:3},{default:o(()=>[d(u(i(p)("page.banlist.banlist")),1)]),_:1}),Pn,n(q,{class:"list-header",wrap:""},{default:o(()=>[n(I,null,{default:o(()=>[d(u(i(p)("page.banlist.banlist.description")),1)]),_:1}),n(R,{style:{width:"250px"},placeholder:i(p)("page.banlist.banlist.searchPlaceHolder"),onSearch:k,"allow-clear":"","search-button":""},null,8,["placeholder"])]),_:1}),n(Xe,{virtualListProps:{height:$.value},ref_key:"banlist",ref:a,onReachBottom:M,scrollbar:!1,data:S.value},{item:o(({item:W,index:et})=>[n(Je,{style:F({marginBottom:et===S.value.length-1&&h.value?"50px":void 0})},{default:o(()=>[n(Ze,{column:{xs:1,md:2,xl:3},layout:["inline-vertical","horizontal"][i(U)]},{title:o(()=>[n(q,{wrap:""},{default:o(()=>[n(I,{bold:"",copyable:""},{default:o(()=>[d(u(W.banMetadata.peer.address.ip)+":"+u(W.banMetadata.peer.address.port),1)]),_:2},1024),n(I,{code:""},{default:o(()=>[d(u(W.banMetadata.peer.clientName),1)]),_:2},1024)]),_:2},1024)]),default:o(()=>[n(H,{label:i(p)("page.banlist.banlist.listItem.reserveDNSLookup"),span:1},{default:o(()=>[d(u(W.banMetadata.reverseLookup),1)]),_:2},1032,["label"]),n(H,{label:i(p)("page.banlist.banlist.listItem.banTime"),span:1},{default:o(()=>[d(u(i(w)(W.banMetadata.banAt,"long")),1)]),_:2},1032,["label"]),n(H,{label:i(p)("page.banlist.banlist.listItem.expireTime"),span:1},{default:o(()=>[d(u(i(w)(W.banMetadata.unbanAt,"long")),1)]),_:2},1032,["label"]),n(H,{label:i(p)("page.banlist.banlist.listItem.location"),span:2},{default:o(()=>[d(u(W.banMetadata.torrent.name),1)]),_:2},1032,["label"]),n(H,{label:i(p)("page.banlist.banlist.listItem.snapshot"),span:1},{default:o(()=>[n(A,{class:"green"}),d(" "+u(i(re)(W.banMetadata.peer.uploaded))+" ",1),n(z,{class:"red"}),d(" "+u(i(re)(W.banMetadata.peer.downloaded))+" - "+u((W.banMetadata.peer.progress*100).toFixed(2))+"% ",1)]),_:2},1032,["label"]),n(H,{label:i(p)("page.banlist.banlist.listItem.reason"),span:3},{default:o(()=>[d(u(W.banMetadata.description),1)]),_:2},1032,["label"])]),_:2},1032,["layout"])]),_:2},1032,["style"])]),"scroll-loading":o(()=>[S.value.length===0?(_(),T(Ge,{key:0,style:F({height:`${$.value}px`})},null,8,["style"])):le("",!0),h.value?(_(),E("div",Mn,[c.value?(_(),T(I,{key:0},{default:o(()=>[d(u(i(p)("page.banlist.banlist.bottomReached")),1)]),_:1})):(_(),T(Qe,{key:1}))])):le("",!0)]),_:1},8,["virtualListProps","data"])]),_:1})}}}),se=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a},zn=se(Nn,[["__scopeId","data-v-3b0a6a6d"]]),xn=L({__name:"index",setup(e){return(t,a)=>{const l=D;return _(),T(l,{direction:"vertical",fill:""},{default:o(()=>[n(zn)]),_:1})}}});async function Un(e){const t=O();await t.serverAvailable;const a=new URL(ne(t.endpoint,"api/banlogs"),location.href);return a.searchParams.set("pageIndex",String(e.pageIndex-1)),e.pageSize&&a.searchParams.set("pageSize",String(e.pageSize)),fetch(a,{headers:oe()}).then(l=>l.json()).then(l=>({...l,pageIndex:l.pageIndex+1}))}const Bn=L({__name:"banlogTable",setup(e){const t=j(!0),a=ee(),l=O(),{t:s,d:c}=V(),{data:r,total:h,current:p,loading:w,pageSize:y,changeCurrent:f,changePageSize:g,refresh:v}=lt(Un,{defaultParams:[{pageIndex:1,pageSize:10}],pagination:{currentKey:"pageIndex",pageSizeKey:"pageSize",totalKey:"total"},pollingInterval:b(()=>a.pollingInterval),cacheKey:S=>`${l.endpoint}-banlogs-${(S==null?void 0:S[0].pageIndex)||1}-${(S==null?void 0:S[0].pageSize)||10}`,onSuccess:a.renewLastUpdate,onAfter:()=>{t.value=!1}});Z([y,p],()=>{t.value=!0}),Z(()=>l.endpoint,v);const m=b(()=>t.value||w.value||!M.value),k=[{title:()=>s("page.banlog.banlogTable.column.banTime")+"/"+s("page.banlog.banlogTable.column.unbanTime"),slotName:"banAt",width:210},{title:()=>s("page.banlog.banlogTable.column.peerAddress"),slotName:"peerAddress",width:230},{title:()=>s("page.banlog.banlogTable.column.peerId"),slotName:"peerId",width:120},{title:()=>s("page.banlog.banlogTable.column.trafficSnapshot"),slotName:"peerStatus",width:150},{title:()=>s("page.banlog.banlogTable.column.torrentName"),dataIndex:"torrentName",ellipsis:!0,tooltip:!0},{title:()=>s("page.banlog.banlogTable.column.torrentSize"),slotName:"torrentSize",width:120},{title:()=>s("page.banlog.banlogTable.column.description"),dataIndex:"description",ellipsis:!0,tooltip:!0}],M=b(()=>{var S;return(S=r.value)==null?void 0:S.results});return(S,U)=>{const B=Ca,$=Y,N=Fe,C=D,P=Ke,I=qe,R=xt,q=Pe,H=va,A=Ne;return _(),T(A,{stripe:!0,columns:k,data:M.value,loading:m.value,pagination:{total:i(h),current:i(p),pageSize:i(y),showPageSize:!0},"column-resizable":"",size:"medium",onPageChange:i(f),onPageSizeChange:i(g),class:"banlog-table"},{banAt:o(({record:z})=>[n(C,{fill:"",direction:"vertical"},{default:o(()=>[n($,null,{default:o(()=>[n(B),d(" "+u(i(c)(z.banAt,"long")),1)]),_:2},1024),n($,null,{default:o(()=>[n(N),d(" "+u(z.unbanAt?i(c)(z.unbanAt,"long"):i(s)("page.banlog.banlogTable.notUnbanned")),1)]),_:2},1024)]),_:2},1024)]),peerAddress:o(({record:z})=>[n($,{copyable:"",code:""},{default:o(()=>[d(u(z.peerIp)+":"+u(z.peerPort),1)]),_:2},1024)]),peerStatus:o(({record:z})=>[n(C,{fill:"",style:{"justify-content":"space-between"}},{default:o(()=>[n(C,{fill:"",direction:"vertical"},{default:o(()=>[n($,null,{default:o(()=>[n(P,{class:"green"}),d(" "+u(i(re)(z.peerUploaded)),1)]),_:2},1024),n($,null,{default:o(()=>[n(I,{class:"red"}),d(" "+u(i(re)(z.peerDownloaded)),1)]),_:2},1024)]),_:2},1024),n(q,{content:(z.peerProgress*100).toFixed(2)+"%"},{default:o(()=>[n(R,{percent:z.peerProgress,size:"mini"},null,8,["percent"])]),_:2},1032,["content"])]),_:2},1024)]),peerId:o(({record:z})=>[x("p",null,[d(u(z.peerId)+" ",1),n(q,{content:z.peerClientName},{default:o(()=>[n(H)]),_:2},1032,["content"])])]),torrentSize:o(({record:z})=>[n(q,{content:`Hash: ${z.torrentInfoHash}`},{default:o(()=>[x("p",null,u(i(re)(z.torrentSize)),1)]),_:2},1032,["content"])]),_:1},8,["data","loading","pagination","onPageChange","onPageSizeChange"])}}}),jn=se(Bn,[["__scopeId","data-v-2fe0735c"]]),En=L({__name:"index",setup(e){return(t,a)=>{const l=Y,s=D;return _(),T(s,{direction:"vertical",fill:""},{default:o(()=>[n(l,{style:{"font-size":"1.2em"}},{default:o(()=>[d(u(t.$t("page.banlog.description")),1)]),_:1}),n(jn)]),_:1})}}});async function On(e){const t=O();await t.serverAvailable;const a=new URL(ne(t.endpoint,"api/maxbans"),location.href);return a.searchParams.set("num",String(e)),fetch(a,{headers:oe()}).then(l=>l.json())}const Rn={class:"search-box"},An=L({__name:"top50Table",props:{topNumber:{type:Number,required:!0}},setup(e){const t=ee(),a=O(),{t:l}=V(),s=[{title:()=>l("page.topban.top50Table.column.ipaddress"),dataIndex:"address",filterable:{filter:(y,f)=>f.address.includes(y[0]),slotName:"ip-filter",icon:()=>rt(Ut)}},{title:()=>l("page.topban.top50Table.column.historyCount"),dataIndex:"count"}],c=e,r=b(()=>c.topNumber),{data:h,loading:p,refresh:w}=ie(()=>On(r.value),{pollingInterval:b(()=>t.pollingInterval),onSuccess:t.renewLastUpdate,cacheKey:()=>`${a.endpoint}-topban-${r.value}`});return Z([r,()=>a.endpoint],()=>{w()}),(y,f)=>{const g=Ae,v=D,m=Ne;return _(),T(m,{stripe:"","sticky-header":"",columns:s,data:i(h),"column-resizable":"",loading:i(p),pagination:{showPageSize:!0},"filter-icon-align-left":""},{"ip-filter":o(({filterValue:k,setFilterValue:M,handleFilterConfirm:S,handleFilterReset:U})=>[x("div",Rn,[n(v,{direction:"vertical"},{default:o(()=>[n(g,{"model-value":k[0],placeholder:i(l)("page.topban.top50Table.searchPlaceholder"),"allow-clear":"",onSearch:S,onClear:U,onInput:B=>M([B])},null,8,["model-value","placeholder","onSearch","onClear","onInput"])]),_:2},1024)])]),_:1},8,["data","loading"])}}}),Dn=se(An,[["__scopeId","data-v-46249714"]]),Hn=L({__name:"index",setup(e){const t=j(50);return(a,l)=>{const s=Y,c=_e,r=Le,h=Me,p=Bt,w=jt,y=D;return _(),E(ae,null,[n(s,{style:{"font-size":"1.2em"}},{default:o(()=>[d(u(a.$t("page.topban.description")),1)]),_:1}),n(h,null,{default:o(()=>[n(c,{heading:3},{default:o(()=>[d(u(a.$t("page.topban.title",{topNumber:t.value})),1)]),_:1}),n(r,null,{default:o(()=>[d(u(a.$t("page.topban.usage")),1)]),_:1})]),_:1}),n(y,{fill:"",direction:"vertical"},{default:o(()=>[n(y,null,{default:o(()=>[n(s,null,{default:o(()=>[d(u(a.$t("page.topban.onlyShow")),1)]),_:1}),n(w,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=f=>t.value=f),"trigger-props":{autoFitPopupMinWidth:!0}},{default:o(()=>[n(p,{value:10},{default:o(()=>[d("10")]),_:1}),n(p,{value:20},{default:o(()=>[d("20")]),_:1}),n(p,{value:30},{default:o(()=>[d("30")]),_:1}),n(p,{value:40},{default:o(()=>[d("40")]),_:1}),n(p,{value:50},{default:o(()=>[d("50")]),_:1})]),_:1},8,["modelValue"]),n(s,null,{default:o(()=>[d(u(a.$t("page.topban.onlyShow.number")),1)]),_:1})]),_:1}),n(Dn,{"top-number":t.value},null,8,["top-number"])]),_:1})],64)}}});async function Wn(){const e=O();await e.serverAvailable;const t=new URL(ne(e.endpoint,"api/ruleStatistic"),location.href);return fetch(t,{headers:oe()}).then(a=>a.json())}const Fn={class:"search-box"},Vn=L({__name:"ruleMetricsTable",setup(e){const t=ee(),{t:a}=V(),l=O(),{data:s,refresh:c,loading:r}=ie(Wn,{pollingInterval:b(()=>t.pollingInterval),onSuccess:t.renewLastUpdate,cacheKey:()=>`${l.endpoint}-ruleStatic`}),h=f=>{var g=0,v,m;if(f.length===0)return g;for(v=0;v<f.length;v++)m=f.charCodeAt(v),g=(g<<5)-g+m,g|=0;return g},p=f=>{var v,m;if(console.log((v=s.value)==null?void 0:v.dict[f]),!((m=s.value)!=null&&m.dict[f]))return"gray";const g=Math.abs(h(f))%y.length;return y[g]},w=[{title:()=>a("page.ruleMetrices.metricsTable.column.type"),slotName:"type",width:200},{title:()=>a("page.ruleMetrices.metricsTable.column.type"),slotName:"ruleName",width:200},{title:()=>a("page.ruleMetrices.metricsTable.column.run"),dataIndex:"query",width:200},{title:()=>a("page.ruleMetrices.metricsTable.column.hit"),dataIndex:"hit",filterable:{filter:(f,g)=>f[0]==="yes"&&g.hit>0,slotName:"hit-filter"},width:200}],y=["red","orangered","orange","gold","lime","green","cyan","blue","arcoblue","purple","pinkpurple","magenta"];return Z(()=>l.endpoint,c),(f,g)=>{var B;const v=We,m=Et,k=Y,M=Ve,S=D,U=Ne;return _(),T(U,{columns:w,data:(B=i(s))==null?void 0:B.data,size:"large",loading:i(r),"column-resizable":"","filter-icon-align-left":"",pagination:{showPageSize:!0}},{empty:o(()=>[n(v)]),type:o(({record:$})=>[n(m,{color:p($.type)},{default:o(()=>{var N;return[d(u(((N=i(s))==null?void 0:N.dict[$.type])??$.type),1)]}),_:2},1032,["color"])]),ruleName:o(({record:$})=>[n(k,{code:""},{default:o(()=>[d(u($.metadata.rule),1)]),_:2},1024)]),"hit-filter":o(({filterValue:$,handleFilterConfirm:N,handleFilterReset:C})=>[x("div",Fn,[n(S,null,{default:o(()=>[n(M,{modelValue:$[0],"onUpdate:modelValue":P=>$[0]=P,"checked-value":"yes","unchecked-value":"no",onChange:P=>P==="yes"?N():C()},null,8,["modelValue","onUpdate:modelValue","onChange"]),n(k,null,{default:o(()=>[d(u(i(a)("page.ruleMetrices.metricsTable.filter")),1)]),_:1})]),_:2},1024)])]),_:1},8,["data","loading"])}}}),qn=se(Vn,[["__scopeId","data-v-5acc263e"]]),Kn=L({__name:"index",setup(e){return(t,a)=>{const l=_e,s=Le,c=Me;return _(),E(ae,null,[n(c,null,{default:o(()=>[n(l,{heading:3},{default:o(()=>[d(u(t.$t("page.ruleMetrices.title")),1)]),_:1}),n(s,null,{default:o(()=>[d(u(t.$t("page.ruleMetrices.description")),1)]),_:1})]),_:1}),n(qn)],64)}}}),ze=[{path:"/",name:"dashboard",meta:{label:"router.dashboard"},component:Tn},{path:"/list",name:"banlist",meta:{label:"router.banlist"},component:xn},{path:"/log",name:"banlogs",meta:{label:"router.banlogs"},component:En},{path:"/top",name:"top",meta:{label:"router.topban"},component:Hn},{path:"/metrics",name:"rule_metrics",meta:{label:"router.ruleMetrics"},component:Kn},{path:"/:pathMatch(.*)*",name:"not-found",meta:{hidden:!0,label:"404"},redirect:{name:"dashboard"}}];let ge=location.pathname;var Be;for(const e of ze)if(!((Be=e.meta)!=null&&Be.hidden)&&ge.endsWith(e.path)){ge=ge.slice(0,-e.path.length);break}const Yn=it({history:ct(ge),routes:ze});function Zn(){const e=ut(),t=dt(),a=c=>{e.replace({name:`${c}`})},l=b(()=>ze.filter(c=>{var r;return!((r=c.meta)!=null&&r.hidden)})),s=b(()=>t.name);return[l,s,a]}const Jn=L({__name:"pageFooter",setup(e){const t="1.3.2",a=`5766b37f4f4afe0d6d1e22ffc9a427c4c4cb877f
`,l=O(),s=b(()=>l.serverVersion);return(c,r)=>{const h=Ot,p=De,w=He,y=Oe,f=Re;return _(),T(f,{align:"center",justify:"center"},{default:o(()=>[n(y,{class:"footer"},{default:o(()=>[n(w,{column:{xs:1,md:3,lg:4}},{default:o(()=>[n(p,{label:"Backend Version"},{default:o(()=>{var g,v;return[d(u((g=s.value)==null?void 0:g.version)+" (",1),n(h,{href:`https://github.com/Ghost-chu/PeerBanHelper/commit/${(v=s.value)==null?void 0:v.commit}`},{default:o(()=>{var m;return[d(u((m=s.value)==null?void 0:m.commit.substring(0,8)),1)]}),_:1},8,["href"]),d(") ")]}),_:1}),n(p,{label:"WebUI Version"},{default:o(()=>[d(u(i(t))+" (",1),n(h,{href:`https://github.com/Gaojianli/pbh-fe/commit/${i(a)}`},{default:o(()=>[d(u(i(a).substring(0,8)),1)]),_:1},8,["href"]),d(") ")]),_:1})]),_:1})]),_:1})]),_:1})}}}),Gn=se(Jn,[["__scopeId","data-v-501e3dc2"]]),Qn=L({__name:"settingsModal",setup(e,{expose:t}){const a=O(),l=ee(),s=j(!1),c=b(()=>a.loading),r=b(()=>!!a.error),h=j({endpoint:a.endpoint,interval:l.interval}),{t:p}=V();function w(){h.value.endpoint=a.endpoint,h.value.interval=l.interval}t({showModal:()=>{s.value=!0,w()}});const y=()=>{if(!c.value)return l.interval=h.value.interval,a.setEndpoint(h.value.endpoint)};Z(()=>a.error,v=>{v instanceof pe?(me.error(p(v.message)),!s.value&&v.isApiWrong&&(s.value=!0,w())):v&&(me.error(`${p("settings.endpoint.error")},error:${v}`),s.value||(s.value=!0,w()))},{immediate:!0});const f=()=>{s.value=!1,w()},g=Ie(j({sm:0,md:1}),1);return(v,m)=>{const k=Rt,M=At,S=Dt,U=Ht,B=Wt;return _(),T(B,{"modal-style":{"max-width":"80vw"},visible:s.value,"onUpdate:visible":m[2]||(m[2]=$=>s.value=$),onBeforeOk:y,onCancel:f,closable:!r.value,maskClosable:!r.value,"hide-cancel":r.value,"ok-loading":c.value},{title:o(()=>[d(u(i(p)("settings.modal.title")),1)]),default:o(()=>[n(U,{model:h.value,onSubmit:y,layout:["vertical","horizontal"][i(g)],"label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:o(()=>[n(M,{field:"endpoint",label:"Endpoint:",tooltip:i(p)("settings.modal.endpointTips"),"validate-trigger":"input"},{default:o(()=>[n(k,{modelValue:h.value.endpoint,"onUpdate:modelValue":m[0]||(m[0]=$=>h.value.endpoint=$),placeholder:"http://localhost:8989","allow-clear":""},null,8,["modelValue"])]),_:1},8,["tooltip"]),n(M,{field:"interval",label:i(p)("settings.modal.pollInterval"),"validate-trigger":"input"},{default:o(()=>[n(S,{modelValue:h.value.interval,"onUpdate:modelValue":m[1]||(m[1]=$=>h.value.interval=$),placeholder:"3000",min:100,"hide-button":""},{suffix:o(()=>[d(" ms ")]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","layout"])]),_:1},8,["visible","closable","maskClosable","hide-cancel","ok-loading"])}}});function Xn(){const e=V({useScope:"global"});return{changeLocale:a=>{var l;e.locale.value===a||!e.availableLocales.includes(a)||(e.locale.value=a,(l=document.querySelector("html"))==null||l.setAttribute("lang",a),me.success(e.t("navbar.action.locale")))}}}const eo={class:"lang-selector"},to=L({__name:"pageHeader",setup(e){const{t,d:a,locale:l}=V(),{changeLocale:s}=Xn(),c=[...fn],r=ee(),h=pt({selector:"body",attribute:"arco-theme",valueDark:"dark",valueLight:"light",storageKey:null}),p=j(),w=gt(h),y=()=>{w()};return(f,g)=>{const v=Fe,m=Y,k=Ve,M=Qa,S=Ft,U=Pe,B=Kt,$=Yt,N=Vt,C=Oa,P=Va,I=za,R=D,q=qt;return _(),E(ae,null,[n(q,{title:"PeerBanHelper","show-back":!1},{extra:o(()=>[n(R,{class:"right-side",wrap:""},{default:o(()=>{var H;return[n(m,null,{default:o(()=>[n(v),d(" "+u(i(t)("navbar.action.autoUpdate.lastUpdate"))+u(i(a)(i(r).lastUpdate,"longlong")),1)]),_:1}),n(k,{modelValue:i(r).autoUpdate,"onUpdate:modelValue":g[0]||(g[0]=A=>i(r).autoUpdate=A)},null,8,["modelValue"]),n(m,null,{default:o(()=>[d(u(i(t)("navbar.action.autoUpdate")),1)]),_:1}),x("div",eo,[n(N,{trigger:"click",onSelect:g[1]||(g[1]=A=>i(s)(A))},{content:o(()=>[(_(),E(ae,null,Te(c,A=>n($,{key:A.value,value:A.value},{icon:o(()=>[mt(n(B,null,null,512),[[_t,A.value===i(l)]])]),default:o(()=>[d(" "+u(A.label),1)]),_:2},1032,["value"])),64))]),default:o(()=>[n(U,{content:i(t)("settings.language")},{default:o(()=>[n(S,{class:"nav-btn",type:"outline",shape:"circle"},{icon:o(()=>[n(M)]),_:1})]),_:1},8,["content"])]),_:1})]),n(U,{content:i(h)?i(t)("settings.navbar.theme.toDark"):i(t)("settings.navbar.theme.toLight")},{default:o(()=>[n(S,{class:"nav-btn",type:"outline",shape:"circle",onClick:y},{icon:o(()=>[i(h)?(_(),T(C,{key:0})):(_(),T(P,{key:1}))]),_:1})]),_:1},8,["content"]),n(S,{class:"nav-btn",type:"outline",shape:"circle",status:"normal",onClick:(H=p.value)==null?void 0:H.showModal},{icon:o(()=>[n(I)]),_:1},8,["onClick"])]}),_:1})]),_:1}),n(Qn,{ref_key:"settingsModalRef",ref:p},null,512)],64)}}}),ao=se(to,[["__scopeId","data-v-b9f9704a"]]),no=L({__name:"App",setup(e){const{t,locale:a}=V(),[l,s,c]=Zn();return(r,h)=>{const p=Jt,w=Gt,y=na,f=Qt,g=Xt,v=D,m=ea,k=ta,M=aa,S=Zt;return _(),T(S,{locale:i(yn)[i(a)]},{default:o(()=>[n(M,null,{default:o(()=>[n(p,null,{default:o(()=>[n(ao)]),_:1}),n(m,null,{default:o(()=>[n(v,{direction:"vertical",fill:"",style:{width:"100%","max-width":"1200px",margin:"auto"}},{default:o(()=>[n(w,{type:"warning",closable:""},{default:o(()=>[d(u(i(t)("main.workInProgressTips")),1)]),_:1}),n(f,{"active-key":i(s),onChange:i(c),size:"large",animation:!0,"destroy-on-hide":!0,"lazy-load":!0},{default:o(()=>[(_(!0),E(ae,null,Te(i(l),U=>{var B;return _(),T(y,{key:U.name,title:i(t)(String((B=U.meta)==null?void 0:B.label))},{default:o(()=>[(_(),T(ht(U.component)))]),_:2},1032,["title"])}),128))]),_:1},8,["active-key","onChange"]),n(g)]),_:1})]),_:1}),n(k,null,{default:o(()=>[n(Gn)]),_:1})]),_:1})]),_:1},8,["locale"])}}}),ce=bt(no);me._context=ce._context;ft({loadingDelay:400,loadingKeep:1e3,pollingWhenOffline:!0});ce.use(vt());ce.use(vn);ce.use(Yn);ce.mount("#app");
